<?xml version='1.0' encoding='UTF-8'?>
<model name="modules" xmlns="http://www.cellml.org/cellml/1.1#" xmlns:cellml="http://www.cellml.org/cellml/1.1#" xmlns:xlink="http://www.w3.org/1999/xlink">
<!--&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;module_units&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;//-->
<import xlink:href="control_parasymp_units.cellml">
    <units name="s2" units_ref="s2"/>
    <units name="Hz" units_ref="Hz"/>
    <units name="millis" units_ref="millis"/>
    <units name="per_millis" units_ref="per_millis"/>
    <units name="mm" units_ref="mm"/>
    <units name="m2" units_ref="m2"/>
    <units name="mm2" units_ref="mm2"/>
    <units name="m3" units_ref="m3"/>
    <units name="m4" units_ref="m4"/>
    <units name="mm3" units_ref="mm3"/>
    <units name="J_per_s" units_ref="J_per_s"/>
    <units name="mol_per_s" units_ref="mol_per_s"/>
    <units name="mmol_per_s" units_ref="mmol_per_s"/>
    <units name="umol_per_s" units_ref="umol_per_s"/>
    <units name="C_per_s" units_ref="C_per_s"/>
    <units name="mC_per_s" units_ref="mC_per_s"/>
    <units name="uC_per_s" units_ref="uC_per_s"/>
    <units name="nC_per_s" units_ref="nC_per_s"/>
    <units name="Cm_per_millis" units_ref="Cm_per_millis"/>
    <units name="m_per_s" units_ref="m_per_s"/>
    <units name="mm_per_s" units_ref="mm_per_s"/>
    <units name="um_per_s" units_ref="um_per_s"/>
    <units name="rad_per_s" units_ref="rad_per_s"/>
    <units name="m3_per_s" units_ref="m3_per_s"/>
    <units name="milliL" units_ref="milliL"/>
    <units name="per_milliL_s" units_ref="per_milliL_s"/>
    <units name="s_per_m3" units_ref="s_per_m3"/>
    <units name="s_per_milliV" units_ref="s_per_milliV"/>
    <units name="s_per_millis" units_ref="s_per_millis"/>
    <units name="millis_per_s" units_ref="millis_per_s"/>
    <units name="mm3_per_s" units_ref="mm3_per_s"/>
    <units name="l_per_s" units_ref="l_per_s"/>
    <units name="per_ml_s" units_ref="per_ml_s"/>
    <units name="J_per_mol" units_ref="J_per_mol"/>
    <units name="J_per_kmol_K" units_ref="J_per_kmol_K"/>
    <units name="J_per_M" units_ref="J_per_M"/>
    <units name="J_per_C" units_ref="J_per_C"/>
    <units name="J_per_C_s" units_ref="J_per_C_s"/>
    <units name="J_per_m" units_ref="J_per_m"/>
    <units name="J_per_m3" units_ref="J_per_m3"/>
    <units name="mmHg" units_ref="mmHg"/>
    <units name="m3_per_J" units_ref="m3_per_J"/>
    <units name="J_per_m3s" units_ref="J_per_m3s"/>
    <units name="m3_per_Js" units_ref="m3_per_Js"/>
    <units name="J2_per_m6" units_ref="J2_per_m6"/>
    <units name="Js2_per_C2" units_ref="Js2_per_C2"/>
    <units name="Js2_per_mol2" units_ref="Js2_per_mol2"/>
    <units name="Js_per_mol2" units_ref="Js_per_mol2"/>
    <units name="Js_per_C2" units_ref="Js_per_C2"/>
    <units name="J_per_mol2" units_ref="J_per_mol2"/>
    <units name="C2_per_J_s" units_ref="C2_per_J_s"/>
    <units name="J_per_C2" units_ref="J_per_C2"/>
    <units name="C2_per_J" units_ref="C2_per_J"/>
    <units name="mol_per_m3" units_ref="mol_per_m3"/>
    <units name="M" units_ref="M"/>
    <units name="mM" units_ref="mM"/>
    <units name="uM" units_ref="uM"/>
    <units name="kg_per_m3" units_ref="kg_per_m3"/>
    <units name="m3_per_kg" units_ref="m3_per_kg"/>
    <units name="per_m3" units_ref="per_m3"/>
    <units name="mol_per_m2_s" units_ref="mol_per_m2_s"/>
    <units name="mM_m_per_s" units_ref="mM_m_per_s"/>
    <units name="J_per_m2_s" units_ref="J_per_m2_s"/>
    <units name="Js_per_m4" units_ref="Js_per_m4"/>
    <units name="mM_per_s" units_ref="mM_per_s"/>
    <units name="per_s" units_ref="per_s"/>
    <units name="per_mM_s" units_ref="per_mM_s"/>
    <units name="m6_per_mol2_s" units_ref="m6_per_mol2_s"/>
    <units name="m3_per_mol" units_ref="m3_per_mol"/>
    <units name="mol_per_m3_s" units_ref="mol_per_m3_s"/>
    <units name="per_mol" units_ref="per_mol"/>
    <units name="J_per_mol_K" units_ref="J_per_mol_K"/>
    <units name="C_per_mol" units_ref="C_per_mol"/>
    <units name="m2_per_s" units_ref="m2_per_s"/>
    <units name="per_C" units_ref="per_C"/>
    <units name="per_m" units_ref="per_m"/>
    <units name="per_mM" units_ref="per_mM"/>
    <units name="Js2_per_m2" units_ref="Js2_per_m2"/>
    <units name="Js_per_m2" units_ref="Js_per_m2"/>
    <units name="J_per_m2" units_ref="J_per_m2"/>
    <units name="m_per_s2" units_ref="m_per_s2"/>
    <units name="rad_per_s2" units_ref="rad_per_s2"/>
    <units name="Js_per_m3" units_ref="Js_per_m3"/>
    <units name="Js2_per_m5" units_ref="Js2_per_m5"/>
    <units name="m5_per_Js2" units_ref="m5_per_Js2"/>
    <units name="J_per_m6" units_ref="J_per_m6"/>
    <units name="m6_per_J" units_ref="m6_per_J"/>
    <units name="m6_per_Js" units_ref="m6_per_Js"/>
    <units name="mm6_per_J" units_ref="mm6_per_J"/>
    <units name="Js2_per_m9" units_ref="Js2_per_m9"/>
    <units name="m6s_per_J" units_ref="m6s_per_J"/>
    <units name="Js_per_m6" units_ref="Js_per_m6"/>
    <units name="Js2_per_m6" units_ref="Js2_per_m6"/>
    <units name="m3_per_s2" units_ref="m3_per_s2"/>
    <units name="mm3_per_s2" units_ref="mm3_per_s2"/>
    <units name="per_mm3" units_ref="per_mm3"/>
    <units name="UnitValve" units_ref="UnitValve"/>
    <units name="J_per_m9" units_ref="J_per_m9"/>
    <units name="milliV" units_ref="milliV"/>
    <units name="per_milliV" units_ref="per_milliV"/>
    <units name="millis_per_milliV" units_ref="millis_per_milliV"/>
    <units name="per_V" units_ref="per_V"/>
    <units name="milliV_per_V" units_ref="milliV_per_V"/>
    <units name="V_per_milliV" units_ref="V_per_milliV"/>
    <units name="milliV_per_kiloV" units_ref="milliV_per_kiloV"/>
    <units name="V2" units_ref="V2"/>
    <units name="milliV2" units_ref="milliV2"/>
    <units name="millimol" units_ref="millimol"/>
    <units name="millimolar" units_ref="millimolar"/>
    <units name="per_millimolar" units_ref="per_millimolar"/>
    <units name="per_millimolar_s" units_ref="per_millimolar_s"/>
    <units name="per_millimolar2_s" units_ref="per_millimolar2_s"/>
    <units name="millimolar_per_s" units_ref="millimolar_per_s"/>
    <units name="millimolar_per_megamolar" units_ref="millimolar_per_megamolar"/>
    <units name="per_millimol_milliS" units_ref="per_millimol_milliS"/>
    <units name="per_millimol_millis" units_ref="per_millimol_millis"/>
    <units name="per_millimol_s" units_ref="per_millimol_s"/>
    <units name="microm" units_ref="microm"/>
    <units name="microS" units_ref="microS"/>
    <units name="microm3" units_ref="microm3"/>
    <units name="m3_per_microm3" units_ref="m3_per_microm3"/>
    <units name="picoF" units_ref="picoF"/>
    <units name="S_per_F" units_ref="S_per_F"/>
    <units name="m3_per_Fs" units_ref="m3_per_Fs"/>
    <units name="A_per_F" units_ref="A_per_F"/>
    <units name="megaOhm" units_ref="megaOhm"/>
    <units name="nanoA" units_ref="nanoA"/>
    <units name="nanoA_per_milliA" units_ref="nanoA_per_milliA"/>
    <units name="A_per_nanoA" units_ref="A_per_nanoA"/>
    <units name="J_per_MK" units_ref="J_per_MK"/>
    <units name="C_per_M" units_ref="C_per_M"/>
    <units name="m3_per_J_millis" units_ref="m3_per_J_millis"/>
    <units name="m3_per_M_millis" units_ref="m3_per_M_millis"/>
    <units name="m3_per_millimol_s" units_ref="m3_per_millimol_s"/>
    <units name="millimol_per_m3" units_ref="millimol_per_m3"/>
    <units name="Hz2" units_ref="Hz2"/>
    <units name="cm" units_ref="cm"/>
    <units name="J_per_m4_s" units_ref="J_per_m4_s"/>
    <units name="m3_per_mol_per_sec" units_ref="m3_per_mol_per_sec"/>
    <units name="mol_per_m3_per_kPa" units_ref="mol_per_m3_per_kPa"/>
    <units name="mol_per_m3_per_Pa" units_ref="mol_per_m3_per_Pa"/>
    <units name="m3_per_mol_per_s" units_ref="m3_per_mol_per_s"/>
    <units name="mol_per_m3_per_s" units_ref="mol_per_m3_per_s"/>
</import>
    <component name="pv_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="E" public_interface="in" units="J_per_m3"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="h" public_interface="out" units="metre"/>
        <variable name="r" public_interface="in" units="metre"/>
        <variable name="I" public_interface="out" units="Js2_per_m6"/>
        <variable name="C" public_interface="out" units="m6_per_J"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <variable name="a_vessel" public_interface="in" units="dimensionless"/>
        <variable name="b_vessel" public_interface="in" units="per_m"/>
        <variable name="c_vessel" public_interface="in" units="dimensionless"/>
        <variable name="d_vessel" public_interface="in" units="per_m"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="u_in" public_interface="in" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <variable name="v_out" public_interface="in" units="m3_per_s"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <!-- Constitutive Relations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>h</ci>
                <apply>
                    <times/>
                    <ci>r</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>a_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>b_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>c_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>d_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>C</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>E</ci>
                        <ci>h</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>u_in</ci>
                                <ci>u</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>R</ci>
                                <ci>v</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>beta_g</ci>
                            <ci>rho</ci>
                            <ci>g</ci>
                            <ci>l</ci>
                            <apply>
                                <cos/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>theta</ci>
                                        <pi/>
                                    </apply>
                                    <cn cellml:units="dimensionless">180</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v</ci>
                    <ci>v_out</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <ci>C</ci>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <apply>
                        <times/>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <ci>v</ci>
                            <ci>v_out</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="pp_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="E" public_interface="in" units="J_per_m3"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="h" public_interface="out" units="metre"/>
        <variable name="r" public_interface="in" units="metre"/>
        <variable name="I" public_interface="out" units="Js2_per_m6"/>
        <variable name="C" public_interface="out" units="m6_per_J"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <variable name="a_vessel" public_interface="in" units="dimensionless"/>
        <variable name="b_vessel" public_interface="in" units="per_m"/>
        <variable name="c_vessel" public_interface="in" units="dimensionless"/>
        <variable name="d_vessel" public_interface="in" units="per_m"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="u_in" public_interface="in" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <variable initial_value="0.0" name="v_d" public_interface="out" units="m3_per_s"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <!-- Constitutive Relations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>h</ci>
                <apply>
                    <times/>
                    <ci>r</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>a_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>b_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>c_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>d_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>C</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>E</ci>
                        <ci>h</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>u_in</ci>
                                <ci>u</ci>
                            </apply>
                            <apply>
                                <times/>
                                <apply>
                                    <divide/>
                                    <ci>R</ci>
                                    <cn cellml:units="dimensionless">2</cn>
                                </apply>
                                <ci>v</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>beta_g</ci>
                            <ci>rho</ci>
                            <ci>g</ci>
                            <ci>l</ci>
                            <apply>
                                <cos/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>theta</ci>
                                        <pi/>
                                    </apply>
                                    <cn cellml:units="dimensionless">180</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <divide/>
                        <ci>I</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v</ci>
                    <ci>v_d</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <ci>C</ci>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <apply>
                        <times/>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <ci>v</ci>
                            <ci>v_d</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v_d</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <ci>u</ci>
                            <ci>u_out</ci>
                        </apply>
                        <apply>
                            <times/>
                            <apply>
                                <divide/>
                                <ci>R</ci>
                                <cn cellml:units="dimensionless">2</cn>
                            </apply>
                            <ci>v_d</ci>
                        </apply>
                    </apply>
                    <apply>
                        <divide/>
                        <ci>I</ci>
                        <cn cellml:units="dimensionless">2</cn>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="vv_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="E" public_interface="in" units="J_per_m3"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="h" public_interface="out" units="metre"/>
        <variable name="r" public_interface="in" units="metre"/>
        <variable name="I" public_interface="out" units="Js2_per_m6"/>
        <variable name="C" public_interface="out" units="m6_per_J"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <variable name="a_vessel" public_interface="in" units="dimensionless"/>
        <variable name="b_vessel" public_interface="in" units="per_m"/>
        <variable name="c_vessel" public_interface="in" units="dimensionless"/>
        <variable name="d_vessel" public_interface="in" units="per_m"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="v_in" public_interface="in" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u_d" public_interface="out" units="J_per_m3"/>
        <variable name="u_C_d" public_interface="out" units="J_per_m3"/>
        <variable name="v_out" public_interface="in" units="m3_per_s"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <variable initial_value="0.0" name="q_C_d" public_interface="out" units="m3"/>
        <!-- Constitutive Relations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>h</ci>
                <apply>
                    <times/>
                    <ci>r</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>a_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>b_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>c_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>d_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>C</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>E</ci>
                        <ci>h</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>u</ci>
                                <ci>u_d</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>R</ci>
                                <ci>v</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>beta_g</ci>
                            <ci>rho</ci>
                            <ci>g</ci>
                            <ci>l</ci>
                            <apply>
                                <cos/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>theta</ci>
                                        <pi/>
                                    </apply>
                                    <cn cellml:units="dimensionless">180</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_in</ci>
                    <ci>v</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <apply>
                            <divide/>
                            <ci>C</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C_d</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v</ci>
                    <ci>v_out</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C_d</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C_d</ci>
                        <apply>
                            <divide/>
                            <ci>C</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <ci>v_in</ci>
                            <ci>v</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_d</ci>
                <apply>
                    <plus/>
                    <ci>u_C_d</ci>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <ci>v</ci>
                            <ci>v_out</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="vp_simple_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="I" public_interface="in" units="Js2_per_m6"/>
        <variable name="C" public_interface="in" units="m6_per_J"/>
        <variable name="R" public_interface="in" units="Js_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="v_in" public_interface="in" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <ci>u</ci>
                            <ci>u_out</ci>
                        </apply>
                        <apply>
                            <times/>
                            <ci>R</ci>
                            <ci>v</ci>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_in</ci>
                    <ci>v</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <ci>C</ci>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <apply>
                        <times/>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <ci>v_in</ci>
                            <ci>v</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="vp_ven_simple_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="I" public_interface="in" units="Js2_per_m6"/>
        <variable name="C" public_interface="in" units="m6_per_J"/>
        <variable name="R" public_interface="in" units="Js_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="v_in" public_interface="in" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="q_C_init" public_interface="in" units="m3"/>
        <variable initial_value="q_C_init" name="q_C_change" public_interface="out" units="m3"/>
        <variable name="q_C" public_interface="out" units="m3"/>
        <variable name="q" public_interface="out" units="m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <variable name="q_us_0" public_interface="in" units="m3"/>
        <variable name="q_us_wCont" public_interface="out" units="m3"/>
        <variable name="Delta_q_us" public_interface="in" units="m3"/>
        <variable name="Delta_C" public_interface="in" units="m6_per_J"/>
        <variable name="C_wCont" public_interface="out" units="m6_per_J"/>
        <!-- TODO double check that this applies to veins-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <ci>u</ci>
                            <ci>u_out</ci>
                        </apply>
                        <apply>
                            <times/>
                            <ci>R</ci>
                            <ci>v</ci>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C_change</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_in</ci>
                    <ci>v</ci>
                </apply>
            </apply>
            <!-- TODO CHECK THAT CHANGING US VOLUME LIKE THIS CONSERVES VOLUME!!!!-->
            <apply>
                <eq/>
                <ci>q_C</ci>
                <apply>
                    <minus/>
                    <apply>
                        <plus/>
                        <ci>q_C_change</ci>
                        <ci>q_us_0</ci>
                    </apply>
                    <ci>q_us_wCont</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q</ci>
                <apply>
                    <plus/>
                    <ci>q_C</ci>
                    <ci>q_us_wCont</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <ci>C_wCont</ci>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <apply>
                        <times/>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <ci>v_in</ci>
                            <ci>v</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q_us_wCont</ci>
                <apply>
                    <plus/>
                    <ci>q_us_0</ci>
                    <ci>Delta_q_us</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>C_wCont</ci>
                <apply>
                    <plus/>
                    <ci>C</ci>
                    <ci>Delta_C</ci>
                </apply>
            </apply>
        </math>
    </component>
    <!--//////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////// output-BC Vessel ///////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////////////////////////////////-->
    <component name="pp_T_wCont_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="I_T" public_interface="in" units="Js2_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <variable name="R_T" public_interface="in" units="Js_per_m6"/>
        <variable name="C_T" public_interface="in" units="m6_per_J"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u_in" public_interface="in" units="J_per_m3"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <!-- v_T is the output flow to the venous side-->
        <variable initial_value="0.0" name="v_T" public_interface="out" units="m3_per_s"/>
        <variable name="u_out" public_interface="in" units="J_per_m3"/>
        <variable initial_value="0.0" name="q_T" public_interface="out" units="m3"/>
        <variable name="R_T_wCont" public_interface="out" units="Js_per_m6"/>
        <variable name="Delta_R" public_interface="in" units="Js_per_m6"/>
        <variable name="R_local_multiplier" public_interface="in" units="dimensionless"/>
        <!-- Improve this R_v estimate?-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C_T</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <!-- For now terminals don't have a gravity effect, change this for leg terminals-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_T</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v</ci>
                    <ci>v_T</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_T</ci>
                        <ci>C_T</ci>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <apply>
                        <times/>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <ci>v</ci>
                            <ci>v_T</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <ci>u_in</ci>
                            <ci>u</ci>
                        </apply>
                        <apply>
                            <divide/>
                            <apply>
                                <times/>
                                <ci>v</ci>
                                <ci>R_T_wCont</ci>
                            </apply>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                    <ci>I_T</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v_T</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <ci>u</ci>
                            <ci>u_out</ci>
                        </apply>
                        <apply>
                            <divide/>
                            <apply>
                                <times/>
                                <ci>v_T</ci>
                                <ci>R_T_wCont</ci>
                            </apply>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                    <ci>I_T</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_T_wCont</ci>
                <apply>
                    <times/>
                    <apply>
                        <plus/>
                        <ci>R_T</ci>
                        <ci>Delta_R</ci>
                    </apply>
                    <ci>R_local_multiplier</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="pv_split_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="E" public_interface="in" units="J_per_m3"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="h" public_interface="out" units="metre"/>
        <variable name="r" public_interface="in" units="metre"/>
        <variable name="I" public_interface="out" units="Js2_per_m6"/>
        <variable name="C" public_interface="out" units="m6_per_J"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <variable name="a_vessel" public_interface="in" units="dimensionless"/>
        <variable name="b_vessel" public_interface="in" units="per_m"/>
        <variable name="c_vessel" public_interface="in" units="dimensionless"/>
        <variable name="d_vessel" public_interface="in" units="per_m"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="u_in" public_interface="in" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <variable name="du_C_dt" public_interface="out" units="J_per_m3s"/>
        <variable name="v_out_1" public_interface="in" units="m3_per_s"/>
        <variable name="v_out_2" public_interface="in" units="m3_per_s"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <!-- Constitutive Relations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>h</ci>
                <apply>
                    <times/>
                    <ci>r</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>a_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>b_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>c_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>d_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>C</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>E</ci>
                        <ci>h</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>u_in</ci>
                                <ci>u</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>R</ci>
                                <ci>v</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>beta_g</ci>
                            <ci>rho</ci>
                            <ci>g</ci>
                            <ci>l</ci>
                            <apply>
                                <cos/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>theta</ci>
                                        <pi/>
                                    </apply>
                                    <cn cellml:units="dimensionless">180</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <!-- The below assumes constant compliance and is only used as an approximate output for the baroreceptor-->
            <apply>
                <eq/>
                <ci>du_C_dt</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <ci>v</ci>
                            <ci>v_out_1</ci>
                        </apply>
                        <ci>v_out_2</ci>
                    </apply>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- the below allows non constant compliance-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <apply>
                        <minus/>
                        <ci>v</ci>
                        <ci>v_out_1</ci>
                    </apply>
                    <ci>v_out_2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <ci>C</ci>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <apply>
                        <times/>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>v</ci>
                                <ci>v_out_1</ci>
                            </apply>
                            <ci>v_out_2</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="vv_2in2out_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="E" public_interface="in" units="J_per_m3"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="h" public_interface="out" units="metre"/>
        <variable name="r" public_interface="in" units="metre"/>
        <variable name="I" public_interface="out" units="Js2_per_m6"/>
        <variable name="C" public_interface="out" units="m6_per_J"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <variable name="a_vessel" public_interface="in" units="dimensionless"/>
        <variable name="b_vessel" public_interface="in" units="per_m"/>
        <variable name="c_vessel" public_interface="in" units="dimensionless"/>
        <variable name="d_vessel" public_interface="in" units="per_m"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="v_in_1" public_interface="in" units="m3_per_s"/>
        <variable name="v_in_2" public_interface="in" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u_d" public_interface="out" units="J_per_m3"/>
        <variable name="u_C_d" public_interface="out" units="J_per_m3"/>
        <variable name="v_out_1" public_interface="in" units="m3_per_s"/>
        <variable name="v_out_2" public_interface="in" units="m3_per_s"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <variable initial_value="0.0" name="q_C_d" public_interface="out" units="m3"/>
        <!-- Constitutive Relations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>h</ci>
                <apply>
                    <times/>
                    <ci>r</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>a_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>b_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>c_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>d_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>C</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>E</ci>
                        <ci>h</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>u</ci>
                                <ci>u_d</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>R</ci>
                                <ci>v</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>beta_g</ci>
                            <ci>rho</ci>
                            <ci>g</ci>
                            <ci>l</ci>
                            <apply>
                                <cos/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>theta</ci>
                                        <pi/>
                                    </apply>
                                    <cn cellml:units="dimensionless">180</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <apply>
                        <plus/>
                        <ci>v_in_1</ci>
                        <ci>v_in_2</ci>
                    </apply>
                    <ci>v</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <apply>
                            <divide/>
                            <ci>C</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C_d</ci>
                </apply>
                <apply>
                    <minus/>
                    <apply>
                        <minus/>
                        <ci>v</ci>
                        <ci>v_out_1</ci>
                    </apply>
                    <ci>v_out_2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C_d</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C_d</ci>
                        <apply>
                            <divide/>
                            <ci>C</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <plus/>
                                <ci>v_in_1</ci>
                                <ci>v_in_2</ci>
                            </apply>
                            <ci>v</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_d</ci>
                <apply>
                    <plus/>
                    <ci>u_C_d</ci>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>v</ci>
                                <ci>v_out_1</ci>
                            </apply>
                            <ci>v_out_2</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <!-- 2in1out merge vv-->
    <component name="vv_merge_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="mu" public_interface="in" units="Js_per_m3"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="g" public_interface="in" units="m_per_s2"/>
        <variable name="beta_g" public_interface="in" units="dimensionless"/>
        <variable name="theta" public_interface="in" units="dimensionless"/>
        <variable name="E" public_interface="in" units="J_per_m3"/>
        <variable name="l" public_interface="in" units="metre"/>
        <variable name="h" public_interface="out" units="metre"/>
        <variable name="r" public_interface="in" units="metre"/>
        <variable name="I" public_interface="out" units="Js2_per_m6"/>
        <variable name="C" public_interface="out" units="m6_per_J"/>
        <variable name="R" public_interface="out" units="Js_per_m6"/>
        <variable name="R_v" public_interface="out" units="Js_per_m6"/>
        <variable name="a_vessel" public_interface="in" units="dimensionless"/>
        <variable name="b_vessel" public_interface="in" units="per_m"/>
        <variable name="c_vessel" public_interface="in" units="dimensionless"/>
        <variable name="d_vessel" public_interface="in" units="per_m"/>
        <!-- State Variables-->
        <variable name="u_ext" public_interface="in" units="J_per_m3"/>
        <variable name="v_in_1" public_interface="in" units="m3_per_s"/>
        <variable name="v_in_2" public_interface="in" units="m3_per_s"/>
        <variable name="u" public_interface="out" units="J_per_m3"/>
        <variable name="u_C" public_interface="out" units="J_per_m3"/>
        <variable initial_value="0.0" name="v" public_interface="out" units="m3_per_s"/>
        <variable name="u_d" public_interface="out" units="J_per_m3"/>
        <variable name="u_C_d" public_interface="out" units="J_per_m3"/>
        <variable name="v_out" public_interface="in" units="m3_per_s"/>
        <variable initial_value="0.0" name="q_C" public_interface="out" units="m3"/>
        <variable initial_value="0.0" name="q_C_d" public_interface="out" units="m3"/>
        <!-- Constitutive Relations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>h</ci>
                <apply>
                    <times/>
                    <ci>r</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>a_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>b_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>c_vessel</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <times/>
                                    <ci>d_vessel</ci>
                                    <ci>r</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>I</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>C</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">3</cn>
                        </apply>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>E</ci>
                        <ci>h</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">8</cn>
                        <ci>mu</ci>
                        <ci>l</ci>
                    </apply>
                    <apply>
                        <times/>
                        <pi/>
                        <apply>
                            <power/>
                            <ci>r</ci>
                            <cn cellml:units="dimensionless">4</cn>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_v</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="second">0.01</cn>
                    <ci>C</ci>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <ci>u</ci>
                                <ci>u_d</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>R</ci>
                                <ci>v</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>beta_g</ci>
                            <ci>rho</ci>
                            <ci>g</ci>
                            <ci>l</ci>
                            <apply>
                                <cos/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>theta</ci>
                                        <pi/>
                                    </apply>
                                    <cn cellml:units="dimensionless">180</cn>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <ci>I</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C</ci>
                </apply>
                <apply>
                    <minus/>
                    <apply>
                        <plus/>
                        <ci>v_in_1</ci>
                        <ci>v_in_2</ci>
                    </apply>
                    <ci>v</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C</ci>
                        <apply>
                            <divide/>
                            <ci>C</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_C_d</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v</ci>
                    <ci>v_out</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_C_d</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_C_d</ci>
                        <apply>
                            <divide/>
                            <ci>C</ci>
                            <cn cellml:units="dimensionless">2</cn>
                        </apply>
                    </apply>
                    <ci>u_ext</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u</ci>
                <apply>
                    <plus/>
                    <ci>u_C</ci>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <apply>
                                <plus/>
                                <ci>v_in_1</ci>
                                <ci>v_in_2</ci>
                            </apply>
                            <ci>v</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_d</ci>
                <apply>
                    <plus/>
                    <ci>u_C_d</ci>
                    <apply>
                        <times/>
                        <cn cellml:units="dimensionless">2</cn>
                        <ci>R_v</ci>
                        <apply>
                            <minus/>
                            <ci>v</ci>
                            <ci>v_out</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <!-- 2in1out merge vp-->
    <component name="zero_flow">
        <variable name="v_zero" public_interface="out" units="m3_per_s"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>v_zero</ci>
                <cn cellml:units="m3_per_s">0</cn>
            </apply>
        </math>
    </component>
    <component name="lung_stretch_receptor_Gee2023">
        <variable name="q_A" public_interface="in" units="m3"/>
        <variable name="q_b" public_interface="in" units="m3"/>
        <variable name="V_lung" public_interface="out" units="m3"/>
        <variable name="t" public_interface="in" units="second"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>V_lung</ci>
                <apply>
                    <plus/>
                    <ci>q_A</ci>
                    <ci>q_b</ci>
                </apply>
            </apply>
        </math>
        <!--V_lung = sel
    case t > 50{second}:
        0.6{m3};
    otherwise:
        0{m3};
endsel;-->
        <!-- s.43 (lr firing frequency)-->
        <variable initial_value="0" name="f_ls" public_interface="out" units="Hz"/>
        <!-- change to 2 from 0.5 as I changed tau to correct unit of second-->
        <variable name="tau_lung" public_interface="in" units="second"/>
        <variable name="G_al" public_interface="in" units="per_ml_s"/>
        <!-- ode(f_ls, t) = tau_lung*(-f_ls+G_al*V_lung);
 changed so that tau has correct units of seconds. tau should be a time constant-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>f_ls</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>f_ls</ci>
                        </apply>
                        <apply>
                            <times/>
                            <ci>G_al</ci>
                            <ci>V_lung</ci>
                        </apply>
                    </apply>
                    <ci>tau_lung</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="cardiopulmonary_receptor_Gee2023">
        <variable name="P_pvn" public_interface="in" units="J_per_m3"/>
        <variable name="P_mus" public_interface="in" units="J_per_m3"/>
        <variable name="P_pv_P_thor" public_interface="out" units="J_per_m3"/>
        <variable name="t" public_interface="in" units="second"/>
        <!-- P_mus is closest equivalent to P_thor in Finbar's lung model-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>P_pv_P_thor</ci>
                <apply>
                    <minus/>
                    <ci>P_pvn</ci>
                    <ci>P_mus</ci>
                </apply>
            </apply>
        </math>
        <!--P_pv_P_thor = sel
    case t >= 50{second}:
        13{mmHg};
    otherwise:
        6{mmHg};
endsel;-->
        <!-- s.41-->
        <variable name="tau_cp" public_interface="in" units="second"/>
        <variable name="P_l_init" public_interface="in" units="J_per_m3"/>
        <variable initial_value="P_l_init" name="P_l" public_interface="out" units="J_per_m3"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>P_l</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>P_l</ci>
                        </apply>
                        <ci>P_pv_P_thor</ci>
                    </apply>
                    <ci>tau_cp</ci>
                </apply>
            </apply>
        </math>
        <!-- s.42 (cp firing frequency)-->
        <variable name="f_cp" public_interface="out" units="Hz"/>
        <variable name="f_maxl" public_interface="in" units="Hz"/>
        <variable name="P_tn" public_interface="in" units="J_per_m3"/>
        <variable name="k_l" public_interface="in" units="J_per_m3"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_cp</ci>
                <apply>
                    <divide/>
                    <ci>f_maxl</ci>
                    <apply>
                        <plus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <apply>
                                    <minus/>
                                    <ci>P_tn</ci>
                                    <ci>P_l</ci>
                                </apply>
                                <ci>k_l</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <!-- efferent sympatetic outflow /////////////////////////////////////////////////////////-->
    <!-- afferent input signals &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
    <!-- s.46 (heart)-->
    <component name="NTS_Gee2023">
        <!-- baroreceptors-->
        <variable name="t" public_interface="in" units="second"/>
        <variable name="f_br" public_interface="in" units="Hz"/>
        <variable name="f_min_br" public_interface="in" units="Hz"/>
        <variable name="f_max_br" public_interface="in" units="Hz"/>
        <variable name="f_mid_br" public_interface="in" units="Hz"/>
        <variable name="f_NTS_br" public_interface="out" units="Hz"/>
        <variable name="k_NTS_br" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_NTS_br</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_br</ci>
                            <ci>f_max_br</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>f_br</ci>
                                    <ci>f_mid_br</ci>
                                </apply>
                                <ci>k_NTS_br</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_br</ci>
                </apply>
            </apply>
        </math>
        <!-- lung stretch receptors-->
        <variable name="f_ls" public_interface="in" units="Hz"/>
        <variable name="f_min_ls" public_interface="in" units="Hz"/>
        <variable name="f_max_ls" public_interface="in" units="Hz"/>
        <variable name="f_mid_ls" public_interface="in" units="Hz"/>
        <variable name="f_NTS_ls" public_interface="out" units="Hz"/>
        <variable name="k_NTS_ls" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_NTS_ls</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_ls</ci>
                            <ci>f_max_ls</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>f_ls</ci>
                                    <ci>f_mid_ls</ci>
                                </apply>
                                <ci>k_NTS_ls</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_ls</ci>
                </apply>
            </apply>
        </math>
        <!-- cardiopulmonary receptros-->
        <variable name="f_cp" public_interface="in" units="Hz"/>
        <variable name="f_min_cp" public_interface="in" units="Hz"/>
        <variable name="f_max_cp" public_interface="in" units="Hz"/>
        <variable name="f_mid_cp" public_interface="in" units="Hz"/>
        <variable name="f_NTS_cp" public_interface="out" units="Hz"/>
        <variable name="k_NTS_cp" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_NTS_cp</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_cp</ci>
                            <ci>f_max_cp</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>f_cp</ci>
                                    <ci>f_mid_cp</ci>
                                </apply>
                                <ci>k_NTS_cp</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_cp</ci>
                </apply>
            </apply>
        </math>
        <!-- chemoreceptors-->
        <variable name="f_apc" public_interface="in" units="Hz"/>
        <variable name="f_min_ch" public_interface="in" units="Hz"/>
        <variable name="f_max_ch" public_interface="in" units="Hz"/>
        <variable name="f_mid_ch" public_interface="in" units="Hz"/>
        <variable name="f_NTS_ch" public_interface="out" units="Hz"/>
        <variable name="k_NTS_ch" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_NTS_ch</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_ch</ci>
                            <ci>f_max_ch</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>f_apc</ci>
                                    <ci>f_mid_ch</ci>
                                </apply>
                                <ci>k_NTS_ch</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_ch</ci>
                </apply>
            </apply>
        </math>
    </component>
    <!--DMV (new sigmoid form2) &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
    <component name="DMV_Gee2023">
        <!--var f_NTS_br: Hz {pub: in}; will just write out f_NTS_ls + f_NTS_cp-->
        <variable name="t" public_interface="in" units="second"/>
        <variable name="f_NTS_ls" public_interface="in" units="Hz"/>
        <variable name="f_NTS_cp" public_interface="in" units="Hz"/>
        <variable name="f_min_DMV" public_interface="in" units="Hz"/>
        <variable name="f_max_DMV" public_interface="in" units="Hz"/>
        <variable name="f_mid_DMV" public_interface="in" units="Hz"/>
        <variable name="f_DMV" public_interface="out" units="Hz"/>
        <variable name="k_DMV" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_DMV</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_DMV</ci>
                            <ci>f_max_DMV</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <plus/>
                                        <ci>f_NTS_ls</ci>
                                        <ci>f_NTS_cp</ci>
                                    </apply>
                                    <ci>f_mid_DMV</ci>
                                </apply>
                                <ci>k_DMV</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_DMV</ci>
                </apply>
            </apply>
        </math>
    </component>
    <!-- step/threshold goes here ******************************************************************************************-->
    <!-- NA (new sigmoid form1) &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;- -->
    <component name="NA_Gee2023">
        <variable name="t" public_interface="in" units="second"/>
        <variable name="f_NTS_br" public_interface="in" units="Hz"/>
        <variable name="f_NTS_ls" public_interface="in" units="Hz"/>
        <variable name="f_NTS_cp" public_interface="in" units="Hz"/>
        <variable name="f_NTS_ch" public_interface="in" units="Hz"/>
        <variable name="f_NTS_output" public_interface="out" units="Hz"/>
        <variable name="f_NA_input" public_interface="out" units="Hz"/>
        <variable name="k_RSA" public_interface="in" units="dimensionless"/>
        <variable name="s" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_NTS_output</ci>
                <apply>
                    <plus/>
                    <ci>f_NTS_br</ci>
                    <ci>f_NTS_ls</ci>
                    <ci>f_NTS_cp</ci>
                    <ci>f_NTS_ch</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>f_NA_input</ci>
                <piecewise>
                    <piece>
                        <ci>f_NTS_output</ci>
                        <apply>
                            <gt/>
                            <ci>s</ci>
                            <cn cellml:units="dimensionless">0.4</cn>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <times/>
                            <ci>f_NTS_output</ci>
                            <ci>k_RSA</ci>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
        </math>
        <variable name="f_min_NA" public_interface="in" units="Hz"/>
        <variable name="f_max_NA" public_interface="in" units="Hz"/>
        <variable name="f_mid_NA" public_interface="in" units="Hz"/>
        <variable name="f_NA" public_interface="out" units="Hz"/>
        <variable name="k_NA" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_NA</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_NA</ci>
                            <ci>f_max_NA</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>f_NA_input</ci>
                                    <ci>f_mid_NA</ci>
                                </apply>
                                <ci>k_NA</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_NA</ci>
                </apply>
            </apply>
        </math>
    </component>
    <!--NActr (new sigmoid form3) &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
    <component name="NActr_Gee2023">
        <variable name="t" public_interface="in" units="second"/>
        <variable name="f_NA" public_interface="in" units="Hz"/>
        <variable name="f_min_NActr" public_interface="in" units="Hz"/>
        <variable name="f_max_NActr" public_interface="in" units="Hz"/>
        <variable name="f_mid_NActr" public_interface="in" units="Hz"/>
        <!--off from simulink (9.8)
var f_max_NA: Hz {init: 15.78};
var G_mid_NActr: dimensionless {init: 0.62};-->
        <variable name="f_NActr" public_interface="out" units="Hz"/>
        <variable name="k_NActr" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_NActr</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_NActr</ci>
                            <ci>f_max_NActr</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>f_NA</ci>
                                    <ci>f_mid_NActr</ci>
                                </apply>
                                <ci>k_NActr</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_NActr</ci>
                </apply>
            </apply>
        </math>
    </component>
    <!-- ICN //////////////////////////////////////////////////////////////////////////////////-->
    <!-- LCN &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;- -->
    <component name="LCN_Gee2023">
        <variable name="t" public_interface="in" units="second"/>
        <variable name="k_evEmax_gainLCN" public_interface="in" units="dimensionless"/>
        <variable name="f_DMV" public_interface="in" units="Hz"/>
        <variable name="f_NActr" public_interface="in" units="Hz"/>
        <variable name="k_br_gainLCN" public_interface="in" units="dimensionless"/>
        <variable name="f_br" public_interface="in" units="Hz"/>
        <variable name="k_esh_gainLCN" public_interface="in" units="dimensionless"/>
        <variable name="f_esh" public_interface="in" units="Hz"/>
        <variable name="k_cp_gainLCN" public_interface="in" units="dimensionless"/>
        <variable name="f_cp" public_interface="in" units="Hz"/>
        <variable name="f_input_LCN_sum" public_interface="out" units="Hz"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_input_LCN_sum</ci>
                <apply>
                    <plus/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <apply>
                                <times/>
                                <ci>k_evEmax_gainLCN</ci>
                                <apply>
                                    <plus/>
                                    <ci>f_DMV</ci>
                                    <ci>f_NActr</ci>
                                </apply>
                            </apply>
                            <apply>
                                <times/>
                                <ci>k_br_gainLCN</ci>
                                <ci>f_br</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>k_esh_gainLCN</ci>
                            <ci>f_esh</ci>
                        </apply>
                    </apply>
                    <apply>
                        <times/>
                        <ci>k_cp_gainLCN</ci>
                        <ci>f_cp</ci>
                    </apply>
                </apply>
            </apply>
        </math>
        <variable name="f_input_LCN" public_interface="out" units="Hz"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_input_LCN</ci>
                <piecewise>
                    <piece>
                        <ci>f_input_LCN_sum</ci>
                        <apply>
                            <geq/>
                            <ci>f_input_LCN_sum</ci>
                            <cn cellml:units="dimensionless">0</cn>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="dimensionless">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
        </math>
        <variable name="f_LCN" public_interface="out" units="Hz"/>
        <variable name="f_mid_LCN" public_interface="in" units="Hz"/>
        <variable name="f_min_LCN" public_interface="in" units="Hz"/>
        <variable name="f_max_LCN" public_interface="in" units="Hz"/>
        <variable name="k_LCN" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_LCN</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_LCN</ci>
                            <ci>f_max_LCN</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <ci>f_input_LCN</ci>
                                    <ci>f_mid_LCN</ci>
                                </apply>
                                <ci>k_LCN</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_LCN</ci>
                </apply>
            </apply>
        </math>
    </component>
    <!--PN-NA &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
    <component name="PNNA_Gee2023">
        <variable name="t" public_interface="in" units="second"/>
        <variable name="f_PNNA" public_interface="out" units="Hz"/>
        <variable name="f_NA" public_interface="in" units="Hz"/>
        <variable name="f_LCN" public_interface="in" units="Hz"/>
        <variable name="f_mid_PNNA" public_interface="in" units="Hz"/>
        <variable name="f_min_PNNA" public_interface="in" units="Hz"/>
        <variable name="f_max_PNNA" public_interface="in" units="Hz"/>
        <variable name="k_PNNA" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_PNNA</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_PNNA</ci>
                            <ci>f_max_PNNA</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <plus/>
                                        <ci>f_NA</ci>
                                        <ci>f_LCN</ci>
                                    </apply>
                                    <ci>f_mid_PNNA</ci>
                                </apply>
                                <ci>k_PNNA</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_PNNA</ci>
                </apply>
            </apply>
        </math>
    </component>
    <!--PN-DMV &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
    <component name="PNDMV_Gee2023">
        <variable name="f_PNDMV" public_interface="out" units="Hz"/>
        <variable name="f_DMV" public_interface="in" units="Hz"/>
        <variable name="f_NActr" public_interface="in" units="Hz"/>
        <variable name="f_LCN" public_interface="in" units="Hz"/>
        <variable name="f_mid_PNDMV" public_interface="in" units="Hz"/>
        <variable name="f_min_PNDMV" public_interface="in" units="Hz"/>
        <variable name="f_max_PNDMV" public_interface="in" units="Hz"/>
        <variable name="k_PNDMV" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_PNDMV</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <apply>
                            <minus/>
                            <ci>f_min_PNDMV</ci>
                            <ci>f_max_PNDMV</ci>
                        </apply>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <power/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <plus/>
                                        <ci>f_DMV</ci>
                                        <ci>f_NActr</ci>
                                        <ci>f_LCN</ci>
                                    </apply>
                                    <ci>f_mid_PNDMV</ci>
                                </apply>
                                <ci>k_PNDMV</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>f_max_PNDMV</ci>
                </apply>
            </apply>
        </math>
        <variable initial_value="0" name="f_PNDMV_filt" public_interface="out" units="Hz"/>
        <variable name="tau_PNDMV" public_interface="in" units="second"/>
        <variable name="t" public_interface="in" units="second"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>f_PNDMV_filt</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>f_PNDMV</ci>
                        <ci>f_PNDMV_filt</ci>
                    </apply>
                    <ci>tau_PNDMV</ci>
                </apply>
            </apply>
        </math>
    </component>
    <!-- heart period ///////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
    <!--Ts &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-
 s.2 -->
    <!-- ventricular contractility //////////////////////////////////////////////////////////////////////////////////////////////////-->
    <!-- Emaxlv_symp &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
    <!--s.55-->
    <component name="heart_effector_Gee2023">
        <variable name="sigma_Es" public_interface="out" units="J_per_m6"/>
        <variable name="G_Es" public_interface="in" units="J_per_m6"/>
        <variable name="f_esh" public_interface="in" units="Hz"/>
        <variable name="t" public_interface="in" units="second"/>
        <variable name="f_es_min" public_interface="in" units="Hz"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>sigma_Es</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <ci>G_Es</ci>
                            <apply>
                                <ln/>
                                <apply>
                                    <plus/>
                                    <apply>
                                        <minus/>
                                        <ci>f_esh</ci>
                                        <ci>f_es_min</ci>
                                    </apply>
                                    <cn cellml:units="Hz">1</cn>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>f_esh</ci>
                            <ci>f_es_min</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="dimensionless">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
        </math>
        <!--s.56-->
        <variable initial_value="0.0" name="Delta_Es" public_interface="out" units="J_per_m6"/>
        <variable name="tau_Es" public_interface="in" units="second"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_Es</ci>
                </apply>
                <apply>
                    <times/>
                    <apply>
                        <divide/>
                        <cn cellml:units="dimensionless">1</cn>
                        <ci>tau_Es</ci>
                    </apply>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_Es</ci>
                        </apply>
                        <ci>sigma_Es</ci>
                    </apply>
                </apply>
            </apply>
        </math>
        <!-- Emaxlv_vag&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
        <!-- s.57-->
        <variable name="sigma_Ev" public_interface="out" units="J_per_m6"/>
        <variable name="G_Ev" public_interface="in" units="Js_per_m6"/>
        <variable name="f_PNDMV_filt" public_interface="in" units="Hz"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>sigma_Ev</ci>
                <apply>
                    <times/>
                    <ci>G_Ev</ci>
                    <ci>f_PNDMV_filt</ci>
                </apply>
            </apply>
        </math>
        <!-- s. 58-->
        <variable initial_value="0.0" name="Delta_Ev" public_interface="out" units="J_per_m6"/>
        <variable name="tau_Ev" public_interface="in" units="second"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_Ev</ci>
                </apply>
                <apply>
                    <times/>
                    <apply>
                        <divide/>
                        <cn cellml:units="dimensionless">1</cn>
                        <ci>tau_Ev</ci>
                    </apply>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_Ev</ci>
                        </apply>
                        <ci>sigma_Ev</ci>
                    </apply>
                </apply>
            </apply>
        </math>
        <variable name="Delta_Emax" public_interface="out" units="J_per_m6"/>
        <variable name="scale" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>Delta_Emax</ci>
                <apply>
                    <times/>
                    <ci>scale</ci>
                    <apply>
                        <plus/>
                        <ci>Delta_Es</ci>
                        <ci>Delta_Ev</ci>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="baroreceptor_type">
        <variable name="t" public_interface="in" units="second"/>
        <variable name="P_sys" public_interface="in" units="J_per_m3"/>
        <variable name="P_baro_init" public_interface="in" units="J_per_m3"/>
        <variable initial_value="P_baro_init" name="P_baro" public_interface="out" units="J_per_m3"/>
        <variable name="f_ab" public_interface="out" units="per_s"/>
        <variable name="dP_sys_dt" public_interface="in" units="J_per_m3s"/>
        <!-- Constants-->
        <variable name="P_nom" public_interface="in" units="J_per_m3"/>
        <variable name="f_ab_min" public_interface="in" units="per_s"/>
        <variable name="f_ab_max" public_interface="in" units="per_s"/>
        <variable name="k_ab" public_interface="in" units="J_per_m3"/>
        <variable name="tau_zb" public_interface="in" units="second"/>
        <variable name="tau_pb" public_interface="in" units="second"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>P_baro</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <ci>P_sys</ci>
                            <apply>
                                <times/>
                                <ci>tau_zb</ci>
                                <ci>dP_sys_dt</ci>
                            </apply>
                        </apply>
                        <ci>P_baro</ci>
                    </apply>
                    <ci>tau_pb</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>f_ab</ci>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <ci>f_ab_min</ci>
                        <apply>
                            <times/>
                            <ci>f_ab_max</ci>
                            <apply>
                                <exp/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <minus/>
                                        <ci>P_baro</ci>
                                        <ci>P_nom</ci>
                                    </apply>
                                    <ci>k_ab</ci>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <apply>
                                    <minus/>
                                    <ci>P_baro</ci>
                                    <ci>P_nom</ci>
                                </apply>
                                <ci>k_ab</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="chemoreceptor_type">
        <variable name="t" public_interface="in" units="second"/>
        <!--inp variables-->
        <variable name="C_CO2_a" public_interface="in" units="dimensionless"/>
        <variable name="C_O2_a" public_interface="in" units="dimensionless"/>
        <variable name="dot_C_CO2_a" public_interface="in" units="per_s"/>
        <!--output variables-->
        <variable name="X_O2" public_interface="out" units="dimensionless"/>
        <variable name="phi_stat" public_interface="out" units="per_s"/>
        <variable initial_value="0.0" name="phi_CO2_dyn" public_interface="out" units="per_s"/>
        <variable name="f_c_stat" public_interface="out" units="per_s"/>
        <variable name="f_c_dyn" public_interface="out" units="per_s"/>
        <variable name="f_apc" public_interface="out" units="per_s"/>
        <variable initial_value="0.0" name="phi_apc" public_interface="out" units="per_s"/>
        <variable name="P_O2_a" public_interface="out" units="J_per_m3"/>
        <!-- Constants-->
        <variable name="AA" public_interface="in" units="dimensionless"/>
        <variable name="BB" public_interface="in" units="dimensionless"/>
        <variable name="C_CO2_a_nom" public_interface="in" units="dimensionless"/>
        <variable name="K_O2" public_interface="in" units="dimensionless"/>
        <variable name="K_CO2" public_interface="in" units="per_s"/>
        <variable name="K_stat" public_interface="in" units="per_s"/>
        <variable name="K_dyn" public_interface="in" units="per_s"/>
        <variable name="tau_cap" public_interface="in" units="second"/>
        <variable name="tau_CO2_cc_dyn" public_interface="in" units="dimensionless"/>
        <!-- equations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>X_O2</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <ci>AA</ci>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <ci>S_O2_a</ci>
                        </apply>
                    </apply>
                    <ci>BB</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>phi_stat</ci>
                <apply>
                    <times/>
                    <ci>K_CO2</ci>
                    <apply>
                        <minus/>
                        <ci>C_CO2_a</ci>
                        <ci>C_CO2_a_nom</ci>
                    </apply>
                    <ci>K_O2</ci>
                    <apply>
                        <minus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <apply>
                                    <minus/>
                                    <ci>X_O2</ci>
                                </apply>
                                <ci>K_O2</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>f_c_stat</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <ci>K_stat</ci>
                            <apply>
                                <minus/>
                                <cn cellml:units="dimensionless">1</cn>
                                <apply>
                                    <exp/>
                                    <apply>
                                        <divide/>
                                        <apply>
                                            <minus/>
                                            <ci>phi_stat</ci>
                                        </apply>
                                        <ci>K_stat</ci>
                                    </apply>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>C_CO2_a</ci>
                            <ci>C_CO2_a_nom</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="per_s">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>phi_CO2_dyn</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <times/>
                            <ci>dot_C_CO2_a</ci>
                            <ci>tau_CO2_cc_dyn</ci>
                        </apply>
                        <ci>phi_CO2_dyn</ci>
                    </apply>
                    <ci>tau_cap</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>f_c_dyn</ci>
                <apply>
                    <times/>
                    <ci>K_dyn</ci>
                    <apply>
                        <minus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <apply>
                                    <minus/>
                                    <ci>phi_CO2_dyn</ci>
                                </apply>
                                <ci>K_dyn</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>phi_apc</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <ci>f_c_stat</ci>
                            <ci>f_c_dyn</ci>
                        </apply>
                        <ci>phi_apc</ci>
                    </apply>
                    <ci>tau_cap</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>f_apc</ci>
                <apply>
                    <max/>
                    <ci>phi_apc</ci>
                    <cn cellml:units="per_s">0</cn>
                </apply>
            </apply>
        </math>
        <!--Calculate saturation-->
        <variable name="C_O2_a_diss" public_interface="out" units="dimensionless"/>
        <variable name="S_O2_a" public_interface="out" units="dimensionless"/>
        <variable name="Hgb" public_interface="in" units="kg_per_m3"/>
        <!-- from inverted dissociation-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>P_O2_a</ci>
                <apply>
                    <plus/>
                    <ci>r_1</ci>
                    <apply>
                        <root/>
                        <apply>
                            <minus/>
                            <apply>
                                <power/>
                                <ci>r_1</ci>
                                <cn cellml:units="dimensionless">2</cn>
                            </apply>
                            <ci>s_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- P_CO2_a = d_2*(1{dimensionless}+alpha_2*P_O2_p)/(1{dimensionless}+beta_2*P_O2_p);-->
            <apply>
                <eq/>
                <ci>C_O2_a_diss</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <divide/>
                            <apply>
                                <times/>
                                <ci>P_O2_a</ci>
                                <cn cellml:units="dimensionless">0.003</cn>
                            </apply>
                            <cn cellml:units="dimensionless">100</cn>
                        </apply>
                        <apply>
                            <geq/>
                            <apply>
                                <minus/>
                                <apply>
                                    <minus/>
                                    <ci>C_O2_sat</ci>
                                    <apply>
                                        <times/>
                                        <ci>Hgb</ci>
                                        <cn cellml:units="m3_per_kg" type="e-notation">1.34<sep/>-3</cn>
                                    </apply>
                                </apply>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>P_O2_a</ci>
                                        <cn cellml:units="dimensionless">0.003</cn>
                                    </apply>
                                    <cn cellml:units="dimensionless">100</cn>
                                </apply>
                            </apply>
                            <cn cellml:units="dimensionless">0</cn>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <minus/>
                            <ci>C_O2_sat</ci>
                            <apply>
                                <times/>
                                <ci>Hgb</ci>
                                <cn cellml:units="m3_per_kg" type="e-notation">1.34<sep/>-3</cn>
                            </apply>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <ci>S_O2_a</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>C_O2_a</ci>
                        <ci>C_O2_a_diss</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>Hgb</ci>
                        <cn cellml:units="m3_per_kg" type="e-notation">1.34<sep/>-3</cn>
                    </apply>
                </apply>
            </apply>
        </math>
        <!--____________ inverted dissociation curve below here___________-->
        <variable name="k_1" public_interface="in" units="J_per_m3"/>
        <variable name="k_2" public_interface="in" units="J_per_m3"/>
        <variable name="h_1" public_interface="in" units="dimensionless"/>
        <variable name="h_2" public_interface="in" units="dimensionless"/>
        <variable name="d_1" public_interface="out" units="J_per_m3"/>
        <variable name="d_2" public_interface="out" units="J_per_m3"/>
        <variable name="r_1" public_interface="out" units="J_per_m3"/>
        <variable name="r_2" public_interface="out" units="J_per_m3"/>
        <variable name="s_1" public_interface="out" units="J2_per_m6"/>
        <variable name="s_2" public_interface="out" units="J2_per_m6"/>
        <variable name="alpha_1" public_interface="in" units="m3_per_J"/>
        <variable name="alpha_2" public_interface="in" units="m3_per_J"/>
        <variable name="beta_1" public_interface="in" units="m3_per_J"/>
        <variable name="beta_2" public_interface="in" units="m3_per_J"/>
        <variable name="C_O2_sat" public_interface="in" units="dimensionless"/>
        <variable name="C_CO2_sat" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>d_1</ci>
                <apply>
                    <max/>
                    <apply>
                        <times/>
                        <ci>k_1</ci>
                        <apply>
                            <power/>
                            <apply>
                                <divide/>
                                <ci>C_O2_a</ci>
                                <apply>
                                    <minus/>
                                    <ci>C_O2_sat</ci>
                                    <ci>C_O2_a</ci>
                                </apply>
                            </apply>
                            <ci>h_1</ci>
                        </apply>
                    </apply>
                    <cn cellml:units="J_per_m3">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>d_2</ci>
                <apply>
                    <max/>
                    <apply>
                        <times/>
                        <ci>k_2</ci>
                        <apply>
                            <power/>
                            <apply>
                                <divide/>
                                <ci>C_CO2_a</ci>
                                <apply>
                                    <minus/>
                                    <ci>C_CO2_sat</ci>
                                    <ci>C_CO2_a</ci>
                                </apply>
                            </apply>
                            <ci>h_2</ci>
                        </apply>
                    </apply>
                    <cn cellml:units="J_per_m3">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>r_1</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">0.5</cn>
                        </apply>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <apply>
                                    <plus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <times/>
                                        <ci>beta_1</ci>
                                        <ci>d_2</ci>
                                    </apply>
                                </apply>
                                <apply>
                                    <times/>
                                    <ci>beta_2</ci>
                                    <ci>d_1</ci>
                                </apply>
                            </apply>
                            <apply>
                                <times/>
                                <ci>alpha_1</ci>
                                <ci>alpha_2</ci>
                                <ci>d_1</ci>
                                <ci>d_2</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_2</ci>
                        <apply>
                            <times/>
                            <ci>alpha_2</ci>
                            <ci>beta_1</ci>
                            <ci>d_2</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>r_2</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">0.5</cn>
                        </apply>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <apply>
                                    <plus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <times/>
                                        <ci>beta_2</ci>
                                        <ci>d_1</ci>
                                    </apply>
                                </apply>
                                <apply>
                                    <times/>
                                    <ci>beta_1</ci>
                                    <ci>d_2</ci>
                                </apply>
                            </apply>
                            <apply>
                                <times/>
                                <ci>alpha_2</ci>
                                <ci>alpha_1</ci>
                                <ci>d_2</ci>
                                <ci>d_1</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_1</ci>
                        <apply>
                            <times/>
                            <ci>alpha_1</ci>
                            <ci>beta_2</ci>
                            <ci>d_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>s_1</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                        <apply>
                            <plus/>
                            <ci>d_1</ci>
                            <apply>
                                <times/>
                                <ci>alpha_1</ci>
                                <ci>d_1</ci>
                                <ci>d_2</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_2</ci>
                        <apply>
                            <times/>
                            <ci>alpha_2</ci>
                            <ci>beta_1</ci>
                            <ci>d_2</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>s_2</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                        <apply>
                            <plus/>
                            <ci>d_2</ci>
                            <apply>
                                <times/>
                                <ci>alpha_2</ci>
                                <ci>d_2</ci>
                                <ci>d_1</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_1</ci>
                        <apply>
                            <times/>
                            <ci>alpha_1</ci>
                            <ci>beta_2</ci>
                            <ci>d_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="afferent_to_sympathetic_efferent_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constants-->
        <variable name="f_es_0" public_interface="in" units="per_s"/>
        <variable name="f_es_inf" public_interface="in" units="per_s"/>
        <variable name="f_es_max" public_interface="in" units="per_s"/>
        <variable name="k_es" public_interface="in" units="per_s"/>
        <!-- var theta_s: per_s {pub: in}; //currently ignoring CNS-->
        <variable name="W_bs" public_interface="in" units="dimensionless"/>
        <variable name="W_cs" public_interface="in" units="dimensionless"/>
        <!-- var W_ps: dimensionless {pub: in}; not yet including lung stretch receptor effects-->
        <!-- Variables-->
        <variable name="f_apc" public_interface="in" units="per_s"/>
        <variable name="f_ab" public_interface="in" units="per_s"/>
        <!-- var f_ap: per_s {pub: in};-->
        <variable name="f_s_premax" public_interface="out" units="per_s"/>
        <variable name="f_s" public_interface="out" units="per_s"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>f_s_premax</ci>
                <apply>
                    <plus/>
                    <ci>f_es_inf</ci>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <ci>f_es_0</ci>
                            <ci>f_es_inf</ci>
                        </apply>
                        <apply>
                            <exp/>
                            <apply>
                                <times/>
                                <ci>k_es</ci>
                                <apply>
                                    <plus/>
                                    <apply>
                                        <times/>
                                        <ci>W_bs</ci>
                                        <ci>f_ab</ci>
                                    </apply>
                                    <apply>
                                        <times/>
                                        <ci>W_cs</ci>
                                        <ci>f_apc</ci>
                                    </apply>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!--IGNORING CNS and LUNG STRETCH-->
            <apply>
                <eq/>
                <ci>f_s</ci>
                <piecewise>
                    <piece>
                        <ci>f_s_premax</ci>
                        <apply>
                            <leq/>
                            <ci>f_s_premax</ci>
                            <ci>f_es_max</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <ci>f_es_max</ci>
                    </otherwise>
                </piecewise>
            </apply>
        </math>
    </component>
    <component name="efferent_resistance_effector_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- IMPORTANT: THIS MODULE ASSUMES NO DELAY CONSTANTS, WHICH IS DIFFERENT TO THE ORIGINAL PAPER, ALBANESE2016-->
        <!-- Constants-->
        <variable name="G_theta" public_interface="in" units="Js_per_m6"/>
        <variable name="f_es_min" public_interface="in" units="per_s"/>
        <variable name="tau_theta" public_interface="in" units="second"/>
        <!-- Variables-->
        <variable name="f_s" public_interface="in" units="per_s"/>
        <variable initial_value="0.0" name="Delta_theta" public_interface="out" units="Js_per_m6"/>
        <variable name="sigma_theta" public_interface="out" units="Js_per_m6"/>
        <!-- Equations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>sigma_theta</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <ci>G_theta</ci>
                            <apply>
                                <ln/>
                                <apply>
                                    <times/>
                                    <cn cellml:units="second">1</cn>
                                    <apply>
                                        <plus/>
                                        <apply>
                                            <minus/>
                                            <ci>f_s</ci>
                                            <ci>f_es_min</ci>
                                        </apply>
                                        <cn cellml:units="per_s">1</cn>
                                    </apply>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>f_s</ci>
                            <ci>f_es_min</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="Js_per_m6">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_theta</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_theta</ci>
                        </apply>
                        <ci>sigma_theta</ci>
                    </apply>
                    <ci>tau_theta</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="efferent_venous_us_volume_and_compliance_effector_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- IMPORTANT: THIS MODULE ASSUMES NO DELAY CONSTANTS, WHICH IS DIFFERENT TO THE ORIGINAL PAPER, ALBANESE2016-->
        <!-- IMPORTANT: THIS MODULE HAS BEEN MODIFIED TO CONTROL COMPLIANCE INSTEAD OF UNSTRESSED VOLUME. PARAMS ARE UNVALIDATED-->
        <!-- Constants-->
        <variable name="G_theta_us" public_interface="in" units="m3"/>
        <variable name="G_theta_compliance" public_interface="in" units="m6_per_J"/>
        <variable name="f_es_min" public_interface="in" units="per_s"/>
        <variable name="tau_theta_us" public_interface="in" units="second"/>
        <variable name="tau_theta_compliance" public_interface="in" units="second"/>
        <!-- Variables-->
        <variable name="f_s" public_interface="in" units="per_s"/>
        <variable initial_value="0.0" name="Delta_theta_us" public_interface="out" units="m3"/>
        <variable name="sigma_theta_us" public_interface="out" units="m3"/>
        <variable initial_value="0.0" name="Delta_theta_compliance" public_interface="out" units="m6_per_J"/>
        <variable name="sigma_theta_compliance" public_interface="out" units="m6_per_J"/>
        <!-- Equations-->
        <!-- TODO for both of the below, it probably shouln't be additive. It should be impossible to get to negative.-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>sigma_theta_us</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <ci>G_theta_us</ci>
                            <apply>
                                <ln/>
                                <apply>
                                    <times/>
                                    <cn cellml:units="second">1</cn>
                                    <apply>
                                        <plus/>
                                        <apply>
                                            <minus/>
                                            <ci>f_s</ci>
                                            <ci>f_es_min</ci>
                                        </apply>
                                        <cn cellml:units="per_s">1</cn>
                                    </apply>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>f_s</ci>
                            <ci>f_es_min</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="m3">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_theta_us</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_theta_us</ci>
                        </apply>
                        <ci>sigma_theta_us</ci>
                    </apply>
                    <ci>tau_theta_us</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>sigma_theta_compliance</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <ci>G_theta_compliance</ci>
                            <apply>
                                <ln/>
                                <apply>
                                    <times/>
                                    <cn cellml:units="second">1</cn>
                                    <apply>
                                        <plus/>
                                        <apply>
                                            <minus/>
                                            <ci>f_s</ci>
                                            <ci>f_es_min</ci>
                                        </apply>
                                        <cn cellml:units="per_s">1</cn>
                                    </apply>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>f_s</ci>
                            <ci>f_es_min</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="m3">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_theta_compliance</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_theta_compliance</ci>
                        </apply>
                        <ci>sigma_theta_compliance</ci>
                    </apply>
                    <ci>tau_theta_compliance</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="efferent_heart_period_effector_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- IMPORTANT: THIS MODULE ASSUMES NO DELAY CONSTANTS, WHICH IS DIFFERENT TO THE ORIGINAL PAPER, ALBANESE2016-->
        <!-- Constants-->
        <variable name="G_Ts" public_interface="in" units="second"/>
        <variable name="G_Tv" public_interface="in" units="second"/>
        <variable name="f_es_min" public_interface="in" units="per_s"/>
        <variable name="tau_Ts" public_interface="in" units="second"/>
        <variable name="tau_Tv" public_interface="in" units="second"/>
        <!-- Variables-->
        <variable name="f_s" public_interface="in" units="per_s"/>
        <variable name="f_v" public_interface="in" units="per_s"/>
        <variable initial_value="0.0" name="Delta_Ts" public_interface="out" units="second"/>
        <variable initial_value="0.0" name="Delta_Tv" public_interface="out" units="second"/>
        <variable name="Delta_T" public_interface="out" units="second"/>
        <variable name="sigma_Ts" public_interface="out" units="second"/>
        <variable name="sigma_Tv" public_interface="out" units="second"/>
        <!-- Equations-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>sigma_Ts</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <ci>G_Ts</ci>
                            <apply>
                                <ln/>
                                <apply>
                                    <times/>
                                    <cn cellml:units="second">1</cn>
                                    <apply>
                                        <plus/>
                                        <apply>
                                            <minus/>
                                            <ci>f_s</ci>
                                            <ci>f_es_min</ci>
                                        </apply>
                                        <cn cellml:units="per_s">1</cn>
                                    </apply>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>f_s</ci>
                            <ci>f_es_min</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="second">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_Ts</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_Ts</ci>
                        </apply>
                        <ci>sigma_Ts</ci>
                    </apply>
                    <ci>tau_Ts</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>sigma_Tv</ci>
                <apply>
                    <times/>
                    <ci>G_Tv</ci>
                    <ci>f_v</ci>
                </apply>
            </apply>
            <!--DELAY IGNORED-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_Tv</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_Tv</ci>
                        </apply>
                        <ci>sigma_Tv</ci>
                    </apply>
                    <ci>tau_Tv</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>Delta_T</ci>
                <apply>
                    <plus/>
                    <ci>Delta_Tv</ci>
                    <ci>Delta_Ts</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="local_flow_control_muscle_type">
        <variable name="t" public_interface="in" units="second"/>
        <variable initial_value="0.0" name="x_O2" public_interface="out" units="dimensionless"/>
        <variable name="phi_P_CO2_a" public_interface="out" units="dimensionless"/>
        <variable initial_value="0.0" name="x_CO2" public_interface="out" units="dimensionless"/>
        <variable name="C_O2_a" public_interface="in" units="dimensionless"/>
        <variable name="C_CO2_a" public_interface="in" units="dimensionless"/>
        <variable name="C_O2_p" public_interface="in" units="dimensionless"/>
        <variable name="P_CO2_a" public_interface="in" units="J_per_m3"/>
        <variable name="R_local_multiplier" public_interface="out" units="dimensionless"/>
        <variable name="P_O2_a" public_interface="in" units="J_per_m3"/>
        <!-- Constants-->
        <variable name="P_CO2_a_nom" public_interface="in" units="J_per_m3"/>
        <variable name="k_CO2_m" public_interface="in" units="J_per_m3"/>
        <variable name="C_O2_vm_nom" public_interface="in" units="dimensionless"/>
        <variable name="tau_O2" public_interface="in" units="second"/>
        <variable name="tau_CO2" public_interface="in" units="second"/>
        <variable name="g_O2_m" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>x_O2</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <apply>
                                <minus/>
                                <ci>x_O2</ci>
                            </apply>
                            <ci>C_O2_p</ci>
                        </apply>
                        <ci>C_O2_vm_nom</ci>
                    </apply>
                    <ci>tau_O2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>phi_P_CO2_a</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <apply>
                                    <minus/>
                                    <ci>P_CO2_a</ci>
                                    <ci>P_CO2_a_nom</ci>
                                </apply>
                                <ci>k_CO2_m</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <exp/>
                            <apply>
                                <divide/>
                                <apply>
                                    <minus/>
                                    <ci>P_CO2_a</ci>
                                    <ci>P_CO2_a_nom</ci>
                                </apply>
                                <ci>k_CO2_m</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>x_CO2</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>x_CO2</ci>
                        </apply>
                        <ci>phi_P_CO2_a</ci>
                    </apply>
                    <ci>tau_CO2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_local_multiplier</ci>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <ci>x_CO2</ci>
                    </apply>
                    <apply>
                        <minus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <times/>
                            <ci>g_O2_m</ci>
                            <ci>x_O2</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="local_flow_control_brain_type">
        <variable name="t" public_interface="in" units="second"/>
        <variable initial_value="0.0" name="x_O2" public_interface="out" units="dimensionless"/>
        <variable name="phi_P_CO2_a" public_interface="out" units="dimensionless"/>
        <variable initial_value="0.0" name="x_CO2" public_interface="out" units="dimensionless"/>
        <variable name="C_O2_a" public_interface="in" units="dimensionless"/>
        <variable name="C_CO2_a" public_interface="in" units="dimensionless"/>
        <variable name="C_O2_p" public_interface="in" units="dimensionless"/>
        <variable name="P_CO2_a" public_interface="in" units="J_per_m3"/>
        <variable name="R_local_multiplier" public_interface="out" units="dimensionless"/>
        <variable name="P_O2_a" public_interface="in" units="J_per_m3"/>
        <variable name="G_p" public_interface="out" units="dimensionless"/>
        <!-- Constants-->
        <variable name="P_CO2_a_nom" public_interface="in" units="J_per_m3"/>
        <variable name="C_O2_vb_nom" public_interface="in" units="dimensionless"/>
        <variable name="tau_O2" public_interface="in" units="second"/>
        <variable name="tau_CO2" public_interface="in" units="second"/>
        <variable name="g_O2_b" public_interface="in" units="dimensionless"/>
        <variable name="A_b_lc" public_interface="in" units="dimensionless"/>
        <variable name="B_b_lc" public_interface="in" units="dimensionless"/>
        <variable name="C_b_lc" public_interface="in" units="dimensionless"/>
        <variable name="D_b_lc" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>x_O2</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <apply>
                                <minus/>
                                <ci>x_O2</ci>
                            </apply>
                            <ci>C_O2_p</ci>
                        </apply>
                        <ci>C_O2_vb_nom</ci>
                    </apply>
                    <ci>tau_O2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>phi_P_CO2_a</ci>
                <apply>
                    <minus/>
                    <apply>
                        <divide/>
                        <apply>
                            <plus/>
                            <ci>A_b_lc</ci>
                            <apply>
                                <divide/>
                                <ci>B_b_lc</ci>
                                <apply>
                                    <plus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <times/>
                                        <ci>C_b_lc</ci>
                                        <apply>
                                            <exp/>
                                            <apply>
                                                <times/>
                                                <ci>D_b_lc</ci>
                                                <apply>
                                                    <ln/>
                                                    <ci>P_CO2_a</ci>
                                                </apply>
                                            </apply>
                                        </apply>
                                    </apply>
                                </apply>
                            </apply>
                        </apply>
                        <apply>
                            <plus/>
                            <ci>A_b_lc</ci>
                            <apply>
                                <divide/>
                                <ci>B_b_lc</ci>
                                <apply>
                                    <plus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <times/>
                                        <ci>C_b_lc</ci>
                                        <apply>
                                            <exp/>
                                            <apply>
                                                <times/>
                                                <ci>D_b_lc</ci>
                                                <apply>
                                                    <ln/>
                                                    <ci>P_CO2_a_nom</ci>
                                                </apply>
                                            </apply>
                                        </apply>
                                    </apply>
                                </apply>
                            </apply>
                        </apply>
                    </apply>
                    <cn cellml:units="dimensionless">1</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>x_CO2</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>x_CO2</ci>
                        </apply>
                        <ci>phi_P_CO2_a</ci>
                    </apply>
                    <ci>tau_CO2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>G_p</ci>
                <apply>
                    <plus/>
                    <apply>
                        <minus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <times/>
                            <ci>g_O2_b</ci>
                            <ci>x_O2</ci>
                        </apply>
                    </apply>
                    <ci>x_CO2</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>R_local_multiplier</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="dimensionless">1</cn>
                    <ci>G_p</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="afferent_to_respiratory_efferent_type">
        <variable name="t" public_interface="in" units="second"/>
        <!--constants-->
        <variable name="P_CO2_a_nom" public_interface="in" units="J_per_m3"/>
        <variable name="K_c_resp" public_interface="in" units="m3_per_Js"/>
        <variable name="f_apc_nom" public_interface="in" units="per_s"/>
        <variable name="K_p_resp" public_interface="in" units="dimensionless"/>
        <!-- boundary conditions/inputs-->
        <variable name="P_CO2_a" public_interface="in" units="J_per_m3"/>
        <variable name="P_O2_a" public_interface="in" units="J_per_m3"/>
        <variable name="f_apc" public_interface="in" units="per_s"/>
        <!--variables-->
        <variable name="u_p_resp" public_interface="out" units="per_s"/>
        <variable name="u_c_resp" public_interface="out" units="per_s"/>
        <!-- TODO these need time dynamics to delay them.
 TODO change these to frequencies to properly model afferent to efferent.-->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>u_c_resp</ci>
                <apply>
                    <times/>
                    <ci>K_c_resp</ci>
                    <apply>
                        <minus/>
                        <ci>P_CO2_a</ci>
                        <ci>P_CO2_a_nom</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_p_resp</ci>
                <apply>
                    <times/>
                    <ci>K_p_resp</ci>
                    <apply>
                        <minus/>
                        <ci>f_apc</ci>
                        <ci>f_apc_nom</ci>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="efferent_respiratory_effector_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- peripheral chemo constants
 var D_p: second {pub: in}; DELAY NOT APPLIED-->
        <variable name="G_pA" public_interface="in" units="Js_per_m3"/>
        <variable name="G_pf" public_interface="in" units="dimensionless"/>
        <variable name="tau_pA_min" public_interface="in" units="second"/>
        <variable name="tau_pA_max" public_interface="in" units="second"/>
        <variable name="tau_pA" public_interface="out" units="second"/>
        <variable name="tau_pf_min" public_interface="in" units="second"/>
        <variable name="tau_pf_max" public_interface="in" units="second"/>
        <variable name="tau_pf" public_interface="out" units="second"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>tau_pA</ci>
                <piecewise>
                    <piece>
                        <ci>tau_pA_max</ci>
                        <apply>
                            <geq/>
                            <ci>u_p_resp</ci>
                            <cn cellml:units="dimensionless">0</cn>
                        </apply>
                    </piece>
                    <otherwise>
                        <ci>tau_pA_min</ci>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <ci>tau_pf</ci>
                <piecewise>
                    <piece>
                        <ci>tau_pf_max</ci>
                        <apply>
                            <geq/>
                            <ci>u_p_resp</ci>
                            <cn cellml:units="dimensionless">0</cn>
                        </apply>
                    </piece>
                    <otherwise>
                        <ci>tau_pf_min</ci>
                    </otherwise>
                </piecewise>
            </apply>
        </math>
        <!--central chemo constants
 var D_c: second {pub: in}; DELAY NOT APPLIED-->
        <variable name="G_cA_max" public_interface="in" units="Js_per_m3"/>
        <variable name="G_cA" public_interface="out" units="Js_per_m3"/>
        <variable name="G_cf_max" public_interface="in" units="dimensionless"/>
        <variable name="G_cf" public_interface="out" units="dimensionless"/>
        <variable name="tau_cA_max" public_interface="in" units="second"/>
        <variable name="tau_cA_min" public_interface="in" units="second"/>
        <variable name="tau_cA" public_interface="out" units="second"/>
        <variable name="tau_cf_max" public_interface="in" units="second"/>
        <variable name="tau_cf_min" public_interface="in" units="second"/>
        <variable name="tau_cf" public_interface="out" units="second"/>
        <variable name="P_CO2_c_thresh" public_interface="in" units="J_per_m3"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>G_cA</ci>
                <piecewise>
                    <piece>
                        <ci>G_cA_max</ci>
                        <apply>
                            <gt/>
                            <ci>u_c_resp</ci>
                            <ci>P_CO2_c_thresh</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="dimensionless">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <ci>G_cf</ci>
                <piecewise>
                    <piece>
                        <ci>G_cf_max</ci>
                        <apply>
                            <gt/>
                            <ci>u_c_resp</ci>
                            <ci>P_CO2_c_thresh</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="dimensionless">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <ci>tau_cA</ci>
                <piecewise>
                    <piece>
                        <ci>tau_cA_max</ci>
                        <apply>
                            <gt/>
                            <ci>u_c_resp</ci>
                            <ci>P_CO2_c_thresh</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <ci>tau_cA_min</ci>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <ci>tau_cf</ci>
                <piecewise>
                    <piece>
                        <ci>tau_cf_max</ci>
                        <apply>
                            <gt/>
                            <ci>u_c_resp</ci>
                            <ci>P_CO2_c_thresh</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <ci>tau_cf_min</ci>
                    </otherwise>
                </piecewise>
            </apply>
        </math>
        <!-- boundary conditions/inputs-->
        <variable name="u_c_resp" public_interface="in" units="per_s"/>
        <variable name="u_p_resp" public_interface="in" units="per_s"/>
        <!-- variables-->
        <variable initial_value="0.0" name="Delta_RR_c" public_interface="out" units="Hz"/>
        <variable initial_value="0.0" name="Delta_RR_p" public_interface="out" units="Hz"/>
        <variable name="Delta_RR_resp" public_interface="out" units="second"/>
        <variable initial_value="0.0" name="Delta_P_mus_c" public_interface="out" units="J_per_m3"/>
        <variable initial_value="0.0" name="Delta_P_mus_p" public_interface="out" units="J_per_m3"/>
        <variable name="Delta_P_mus" public_interface="out" units="J_per_m3"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_RR_c</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_RR_c</ci>
                        </apply>
                        <apply>
                            <times/>
                            <ci>G_cf</ci>
                            <ci>u_c_resp</ci>
                        </apply>
                    </apply>
                    <ci>tau_cf</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_RR_p</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_RR_p</ci>
                        </apply>
                        <apply>
                            <times/>
                            <ci>G_pf</ci>
                            <ci>u_p_resp</ci>
                        </apply>
                    </apply>
                    <ci>tau_pf</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_P_mus_c</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_P_mus_c</ci>
                        </apply>
                        <apply>
                            <times/>
                            <ci>G_cA</ci>
                            <ci>u_c_resp</ci>
                        </apply>
                    </apply>
                    <ci>tau_cA</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>Delta_P_mus_p</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <minus/>
                            <ci>Delta_P_mus_p</ci>
                        </apply>
                        <apply>
                            <times/>
                            <ci>G_pA</ci>
                            <ci>u_p_resp</ci>
                        </apply>
                    </apply>
                    <ci>tau_pA</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>Delta_RR_resp</ci>
                <apply>
                    <plus/>
                    <ci>Delta_RR_c</ci>
                    <ci>Delta_RR_p</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>Delta_P_mus</ci>
                <apply>
                    <plus/>
                    <ci>Delta_P_mus_c</ci>
                    <ci>Delta_P_mus_p</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="heart_simple_wCont">
        <variable name="t" public_interface="in" units="second"/>
        <variable initial_value="0.0" name="s" public_interface="out" units="dimensionless"/>
        <!-- Constitutive parameters-->
        <variable name="mt" public_interface="out" units="dimensionless"/>
        <variable name="e_a" public_interface="out" units="dimensionless"/>
        <variable name="e_v" public_interface="out" units="dimensionless"/>
        <variable name="T" public_interface="in" units="second"/>
        <variable name="T_ac" public_interface="in" units="second"/>
        <variable name="T_ar" public_interface="in" units="second"/>
        <!-- var T_ac_norm: dimensionless;
 var T_ar_norm: dimensionless;-->
        <variable name="t_astart" public_interface="in" units="second"/>
        <variable name="t_astart_norm" public_interface="out" units="dimensionless"/>
        <variable name="T_vc" public_interface="in" units="second"/>
        <variable name="T_vr" public_interface="in" units="second"/>
        <!-- var T_vc_norm: dimensionless;
 var T_vr_norm: dimensionless;-->
        <variable name="t_vstart" public_interface="in" units="second"/>
        <variable name="t_vstart_norm" public_interface="out" units="dimensionless"/>
        <variable name="T_wCont" public_interface="out" units="second"/>
        <variable name="T_ac_wCont" public_interface="out" units="second"/>
        <variable name="T_ar_wCont" public_interface="out" units="second"/>
        <variable name="T_vc_wCont" public_interface="out" units="second"/>
        <variable name="T_vr_wCont" public_interface="out" units="second"/>
        <variable name="E_lv_A" public_interface="in" units="J_per_m6"/>
        <variable name="E_lv_B" public_interface="in" units="J_per_m6"/>
        <variable name="E_la_A" public_interface="in" units="J_per_m6"/>
        <variable name="E_la_B" public_interface="in" units="J_per_m6"/>
        <variable name="E_rv_A" public_interface="in" units="J_per_m6"/>
        <variable name="E_rv_B" public_interface="in" units="J_per_m6"/>
        <variable name="E_ra_A" public_interface="in" units="J_per_m6"/>
        <variable name="E_ra_B" public_interface="in" units="J_per_m6"/>
        <variable name="q_ra_us" public_interface="in" units="m3"/>
        <variable name="q_rv_us" public_interface="in" units="m3"/>
        <variable name="q_la_us" public_interface="in" units="m3"/>
        <variable name="q_lv_us" public_interface="in" units="m3"/>
        <variable name="q_ra_init" public_interface="in" units="m3"/>
        <variable name="q_rv_init" public_interface="in" units="m3"/>
        <variable name="q_la_init" public_interface="in" units="m3"/>
        <variable name="q_lv_init" public_interface="in" units="m3"/>
        <!-- State Variables-->
        <variable name="u_ra" public_interface="out" units="J_per_m3"/>
        <variable name="u_rv" public_interface="out" units="J_per_m3"/>
        <variable name="u_la" public_interface="out" units="J_per_m3"/>
        <variable name="u_lv" public_interface="out" units="J_per_m3"/>
        <variable name="u_root" public_interface="in" units="J_per_m3"/>
        <variable name="u_par" public_interface="in" units="J_per_m3"/>
        <variable initial_value="0" name="v_trv" public_interface="out" units="m3_per_s"/>
        <variable initial_value="0" name="v_puv" public_interface="out" units="m3_per_s"/>
        <variable initial_value="0" name="v_miv" public_interface="out" units="m3_per_s"/>
        <variable initial_value="0" name="v_aov" public_interface="out" units="m3_per_s"/>
        <variable name="v_svc" public_interface="in" units="m3_per_s"/>
        <variable name="v_ivc" public_interface="in" units="m3_per_s"/>
        <variable name="v_pvn" public_interface="in" units="m3_per_s"/>
        <variable name="L_trv" units="Js2_per_m6"/>
        <variable name="L_puv" units="Js2_per_m6"/>
        <variable name="L_miv" units="Js2_per_m6"/>
        <variable name="L_aov" units="Js2_per_m6"/>
        <variable name="A_eff_trv" public_interface="out" units="m2"/>
        <variable name="A_eff_puv" public_interface="out" units="m2"/>
        <variable name="A_eff_miv" public_interface="out" units="m2"/>
        <variable name="A_eff_aov" public_interface="out" units="m2"/>
        <variable name="A_nn_trv" public_interface="in" units="m2"/>
        <variable name="A_nn_puv" public_interface="in" units="m2"/>
        <variable name="A_nn_miv" public_interface="in" units="m2"/>
        <variable name="A_nn_aov" public_interface="in" units="m2"/>
        <variable name="l_eff" public_interface="in" units="metre"/>
        <variable name="K_vo_trv" public_interface="in" units="m3_per_Js"/>
        <variable name="K_vo_puv" public_interface="in" units="m3_per_Js"/>
        <variable name="K_vo_miv" public_interface="in" units="m3_per_Js"/>
        <variable name="K_vo_aov" public_interface="in" units="m3_per_Js"/>
        <variable name="K_vc_trv" public_interface="in" units="m3_per_Js"/>
        <variable name="K_vc_puv" public_interface="in" units="m3_per_Js"/>
        <variable name="K_vc_miv" public_interface="in" units="m3_per_Js"/>
        <variable name="K_vc_aov" public_interface="in" units="m3_per_Js"/>
        <variable name="M_rg_trv" public_interface="in" units="dimensionless"/>
        <variable name="M_rg_puv" public_interface="in" units="dimensionless"/>
        <variable name="M_rg_miv" public_interface="in" units="dimensionless"/>
        <variable name="M_rg_aov" public_interface="in" units="dimensionless"/>
        <variable name="M_st_trv" public_interface="in" units="dimensionless"/>
        <variable name="M_st_puv" public_interface="in" units="dimensionless"/>
        <variable name="M_st_miv" public_interface="in" units="dimensionless"/>
        <variable name="M_st_aov" public_interface="in" units="dimensionless"/>
        <variable name="rho" public_interface="in" units="Js2_per_m5"/>
        <variable name="B_trv" public_interface="out" units="Js2_per_m9"/>
        <variable name="B_puv" public_interface="out" units="Js2_per_m9"/>
        <variable name="B_miv" public_interface="out" units="Js2_per_m9"/>
        <variable name="B_aov" public_interface="out" units="Js2_per_m9"/>
        <variable name="zeta_trv" public_interface="out" units="dimensionless"/>
        <variable name="zeta_puv" public_interface="out" units="dimensionless"/>
        <variable name="zeta_miv" public_interface="out" units="dimensionless"/>
        <variable name="zeta_aov" public_interface="out" units="dimensionless"/>
        <variable initial_value="0" name="zeta_trv_pre" public_interface="out" units="dimensionless"/>
        <variable initial_value="0" name="zeta_puv_pre" public_interface="out" units="dimensionless"/>
        <variable initial_value="0" name="zeta_miv_pre" public_interface="out" units="dimensionless"/>
        <variable initial_value="0" name="zeta_aov_pre" public_interface="out" units="dimensionless"/>
        <variable initial_value="1e-14" name="eps_m4" units="m4"/>
        <variable initial_value="1e-14" name="eps_m2" units="m2"/>
        <variable initial_value="0.07" name="eps_1" units="dimensionless"/>
        <variable initial_value="0.02" name="eps_2" units="dimensionless"/>
        <!-- q_lv_init sometimes gets identified, the others are set arbitrarily to zero normally, 
 identifying q_lv sets the stressed volume of the system.-->
        <variable initial_value="q_lv_init" name="q_lv" public_interface="out" units="m3"/>
        <variable initial_value="q_rv_init" name="q_rv" public_interface="out" units="m3"/>
        <variable initial_value="q_la_init" name="q_la" public_interface="out" units="m3"/>
        <variable initial_value="q_ra_init" name="q_ra" public_interface="out" units="m3"/>
        <!-- calculate modified time due to changes in heart period. This can now be modified throughout a simulation.-->
        <variable initial_value="0.0" name="chi_a" public_interface="out" units="dimensionless"/>
        <variable name="chi_afloor" public_interface="out" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>chi_afloor</ci>
                <apply>
                    <minus/>
                    <ci>chi_a</ci>
                    <apply>
                        <floor/>
                        <ci>chi_a</ci>
                    </apply>
                </apply>
            </apply>
            <!-- the below are the wrong units, the 0.5 should be dimensionless-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>chi_a</ci>
                </apply>
                <piecewise>
                    <piece>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>T_ac_wCont</ci>
                        </apply>
                        <apply>
                            <and/>
                            <apply>
                                <geq/>
                                <ci>mt</ci>
                                <ci>t_astart_norm</ci>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>mt</ci>
                                <apply>
                                    <plus/>
                                    <ci>t_astart_norm</ci>
                                    <ci>eps_1</ci>
                                </apply>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>chi_afloor</ci>
                                <cn cellml:units="dimensionless">0.5</cn>
                            </apply>
                        </apply>
                    </piece>
                    <piece>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>T_ac_wCont</ci>
                        </apply>
                        <apply>
                            <and/>
                            <apply>
                                <gt/>
                                <apply>
                                    <plus/>
                                    <ci>t_astart_norm</ci>
                                    <ci>eps_1</ci>
                                </apply>
                                <cn cellml:units="dimensionless">1.0</cn>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>mt</ci>
                                <apply>
                                    <minus/>
                                    <apply>
                                        <plus/>
                                        <ci>t_astart_norm</ci>
                                        <ci>eps_1</ci>
                                    </apply>
                                    <cn cellml:units="dimensionless">1.0</cn>
                                </apply>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>chi_afloor</ci>
                                <cn cellml:units="dimensionless">0.5</cn>
                            </apply>
                        </apply>
                    </piece>
                    <piece>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>T_ac_wCont</ci>
                        </apply>
                        <apply>
                            <and/>
                            <apply>
                                <gt/>
                                <ci>chi_afloor</ci>
                                <ci>eps_2</ci>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>chi_afloor</ci>
                                <cn cellml:units="dimensionless">0.5</cn>
                            </apply>
                        </apply>
                    </piece>
                    <piece>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>T_ar_wCont</ci>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>chi_afloor</ci>
                            <cn cellml:units="dimensionless">0.5</cn>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="per_s">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
        </math>
        <variable initial_value="0.0" name="chi_v" units="dimensionless"/>
        <variable name="chi_vfloor" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>chi_vfloor</ci>
                <apply>
                    <minus/>
                    <ci>chi_v</ci>
                    <apply>
                        <floor/>
                        <ci>chi_v</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>chi_v</ci>
                </apply>
                <piecewise>
                    <piece>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>T_vc_wCont</ci>
                        </apply>
                        <apply>
                            <and/>
                            <apply>
                                <geq/>
                                <ci>mt</ci>
                                <ci>t_vstart_norm</ci>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>mt</ci>
                                <apply>
                                    <plus/>
                                    <ci>t_vstart_norm</ci>
                                    <ci>eps_1</ci>
                                </apply>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>chi_vfloor</ci>
                                <cn cellml:units="dimensionless">0.5</cn>
                            </apply>
                        </apply>
                    </piece>
                    <piece>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>T_vc_wCont</ci>
                        </apply>
                        <apply>
                            <and/>
                            <apply>
                                <gt/>
                                <apply>
                                    <plus/>
                                    <ci>t_vstart_norm</ci>
                                    <ci>eps_1</ci>
                                </apply>
                                <cn cellml:units="dimensionless">1.0</cn>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>mt</ci>
                                <apply>
                                    <minus/>
                                    <apply>
                                        <plus/>
                                        <ci>t_vstart_norm</ci>
                                        <ci>eps_1</ci>
                                    </apply>
                                    <cn cellml:units="dimensionless">1.0</cn>
                                </apply>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>chi_vfloor</ci>
                                <cn cellml:units="dimensionless">0.5</cn>
                            </apply>
                        </apply>
                    </piece>
                    <piece>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>T_vc_wCont</ci>
                        </apply>
                        <apply>
                            <and/>
                            <apply>
                                <gt/>
                                <ci>chi_vfloor</ci>
                                <ci>eps_2</ci>
                            </apply>
                            <apply>
                                <leq/>
                                <ci>chi_vfloor</ci>
                                <cn cellml:units="dimensionless">0.5</cn>
                            </apply>
                        </apply>
                    </piece>
                    <piece>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">0.5</cn>
                            <ci>T_vr_wCont</ci>
                        </apply>
                        <apply>
                            <gt/>
                            <ci>chi_vfloor</ci>
                            <cn cellml:units="dimensionless">0.5</cn>
                        </apply>
                    </piece>
                    <otherwise>
                        <cn cellml:units="per_s">0</cn>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>s</ci>
                </apply>
                <apply>
                    <divide/>
                    <cn cellml:units="dimensionless">1</cn>
                    <ci>T_wCont</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>mt</ci>
                <apply>
                    <minus/>
                    <ci>s</ci>
                    <apply>
                        <floor/>
                        <ci>s</ci>
                    </apply>
                </apply>
            </apply>
        </math>
        <!-- control effects Assume all subperiods scale linearly for now. TODO IMPROVE THIS-->
        <variable name="Delta_T" public_interface="in" units="second"/>
        <variable name="T_min" public_interface="in" units="second"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>T_wCont</ci>
                <apply>
                    <max/>
                    <apply>
                        <plus/>
                        <ci>T</ci>
                        <ci>Delta_T</ci>
                    </apply>
                    <ci>T_min</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>T_ac_wCont</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>T_ac</ci>
                        <ci>T_wCont</ci>
                    </apply>
                    <ci>T</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>T_ar_wCont</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>T_ar</ci>
                        <ci>T_wCont</ci>
                    </apply>
                    <ci>T</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>T_vc_wCont</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>T_vc</ci>
                        <ci>T_wCont</ci>
                    </apply>
                    <ci>T</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>T_vr_wCont</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>T_vr</ci>
                        <ci>T_wCont</ci>
                    </apply>
                    <ci>T</ci>
                </apply>
            </apply>
            <!-- Elastance Functions-->
            <apply>
                <eq/>
                <ci>t_astart_norm</ci>
                <apply>
                    <divide/>
                    <ci>t_astart</ci>
                    <ci>T</ci>
                </apply>
            </apply>
            <!-- T_ac_norm = T_ac/T;
 T_ar_norm = T_vc/T;-->
            <apply>
                <eq/>
                <ci>t_vstart_norm</ci>
                <apply>
                    <divide/>
                    <ci>t_vstart</ci>
                    <ci>T</ci>
                </apply>
            </apply>
            <!-- T_vc_norm = T_vc/T;
 T_vr_norm = T_vr/T;-->
            <apply>
                <eq/>
                <ci>e_a</ci>
                <apply>
                    <times/>
                    <cn cellml:units="dimensionless">0.5</cn>
                    <apply>
                        <minus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <cos/>
                            <apply>
                                <times/>
                                <cn cellml:units="dimensionless">2</cn>
                                <pi/>
                                <ci>chi_afloor</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>e_v</ci>
                <apply>
                    <times/>
                    <cn cellml:units="dimensionless">0.5</cn>
                    <apply>
                        <minus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <cos/>
                            <apply>
                                <times/>
                                <cn cellml:units="dimensionless">2</cn>
                                <pi/>
                                <ci>chi_vfloor</ci>
                            </apply>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- Valve model-->
            <apply>
                <eq/>
                <ci>B_trv</ci>
                <apply>
                    <divide/>
                    <ci>rho</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">2</cn>
                            <apply>
                                <power/>
                                <ci>A_eff_trv</ci>
                                <cn cellml:units="dimensionless">2</cn>
                            </apply>
                        </apply>
                        <ci>eps_m4</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>B_puv</ci>
                <apply>
                    <divide/>
                    <ci>rho</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">2</cn>
                            <apply>
                                <power/>
                                <ci>A_eff_puv</ci>
                                <cn cellml:units="dimensionless">2</cn>
                            </apply>
                        </apply>
                        <ci>eps_m4</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>B_miv</ci>
                <apply>
                    <divide/>
                    <ci>rho</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">2</cn>
                            <apply>
                                <power/>
                                <ci>A_eff_miv</ci>
                                <cn cellml:units="dimensionless">2</cn>
                            </apply>
                        </apply>
                        <ci>eps_m4</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>B_aov</ci>
                <apply>
                    <divide/>
                    <ci>rho</ci>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <cn cellml:units="dimensionless">2</cn>
                            <apply>
                                <power/>
                                <ci>A_eff_aov</ci>
                                <cn cellml:units="dimensionless">2</cn>
                            </apply>
                        </apply>
                        <ci>eps_m4</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>L_trv</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l_eff</ci>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>A_eff_trv</ci>
                        <ci>eps_m2</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>L_puv</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l_eff</ci>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>A_eff_puv</ci>
                        <ci>eps_m2</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>L_miv</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l_eff</ci>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>A_eff_miv</ci>
                        <ci>eps_m2</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>L_aov</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>rho</ci>
                        <ci>l_eff</ci>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>A_eff_aov</ci>
                        <ci>eps_m2</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>A_eff_trv</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <apply>
                                <times/>
                                <ci>M_st_trv</ci>
                                <ci>A_nn_trv</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>M_rg_trv</ci>
                                <ci>A_nn_trv</ci>
                            </apply>
                        </apply>
                        <ci>zeta_trv</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>M_rg_trv</ci>
                        <ci>A_nn_trv</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>A_eff_puv</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <apply>
                                <times/>
                                <ci>M_st_puv</ci>
                                <ci>A_nn_puv</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>M_rg_puv</ci>
                                <ci>A_nn_puv</ci>
                            </apply>
                        </apply>
                        <ci>zeta_puv</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>M_rg_puv</ci>
                        <ci>A_nn_puv</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>A_eff_miv</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <apply>
                                <times/>
                                <ci>M_st_miv</ci>
                                <ci>A_nn_miv</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>M_rg_miv</ci>
                                <ci>A_nn_miv</ci>
                            </apply>
                        </apply>
                        <ci>zeta_miv</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>M_rg_miv</ci>
                        <ci>A_nn_miv</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>A_eff_aov</ci>
                <apply>
                    <plus/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <apply>
                                <times/>
                                <ci>M_st_aov</ci>
                                <ci>A_nn_aov</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>M_rg_aov</ci>
                                <ci>A_nn_aov</ci>
                            </apply>
                        </apply>
                        <ci>zeta_aov</ci>
                    </apply>
                    <apply>
                        <times/>
                        <ci>M_rg_aov</ci>
                        <ci>A_nn_aov</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>zeta_trv_pre</ci>
                </apply>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <apply>
                                <minus/>
                                <cn cellml:units="dimensionless">1</cn>
                                <ci>zeta_trv_pre</ci>
                            </apply>
                            <ci>K_vo_trv</ci>
                            <apply>
                                <minus/>
                                <ci>u_ra</ci>
                                <ci>u_rv</ci>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>u_ra</ci>
                            <ci>u_rv</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <times/>
                            <ci>zeta_trv_pre</ci>
                            <ci>K_vc_trv</ci>
                            <apply>
                                <minus/>
                                <ci>u_ra</ci>
                                <ci>u_rv</ci>
                            </apply>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>zeta_puv_pre</ci>
                </apply>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <apply>
                                <minus/>
                                <cn cellml:units="dimensionless">1</cn>
                                <ci>zeta_puv_pre</ci>
                            </apply>
                            <ci>K_vo_puv</ci>
                            <apply>
                                <minus/>
                                <ci>u_rv</ci>
                                <ci>u_par</ci>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>u_rv</ci>
                            <ci>u_par</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <times/>
                            <ci>zeta_puv_pre</ci>
                            <ci>K_vc_puv</ci>
                            <apply>
                                <minus/>
                                <ci>u_rv</ci>
                                <ci>u_par</ci>
                            </apply>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>zeta_miv_pre</ci>
                </apply>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <apply>
                                <minus/>
                                <cn cellml:units="dimensionless">1</cn>
                                <ci>zeta_miv_pre</ci>
                            </apply>
                            <ci>K_vo_miv</ci>
                            <apply>
                                <minus/>
                                <ci>u_la</ci>
                                <ci>u_lv</ci>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>u_la</ci>
                            <ci>u_lv</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <times/>
                            <ci>zeta_miv_pre</ci>
                            <ci>K_vc_miv</ci>
                            <apply>
                                <minus/>
                                <ci>u_la</ci>
                                <ci>u_lv</ci>
                            </apply>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>zeta_aov_pre</ci>
                </apply>
                <piecewise>
                    <piece>
                        <apply>
                            <times/>
                            <apply>
                                <minus/>
                                <cn cellml:units="dimensionless">1</cn>
                                <ci>zeta_aov_pre</ci>
                            </apply>
                            <ci>K_vo_aov</ci>
                            <apply>
                                <minus/>
                                <ci>u_lv</ci>
                                <ci>u_root</ci>
                            </apply>
                        </apply>
                        <apply>
                            <geq/>
                            <ci>u_lv</ci>
                            <ci>u_root</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <times/>
                            <ci>zeta_aov_pre</ci>
                            <ci>K_vc_aov</ci>
                            <apply>
                                <minus/>
                                <ci>u_lv</ci>
                                <ci>u_root</ci>
                            </apply>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
            <!-- The below ensures zeta can't be negative-->
            <apply>
                <eq/>
                <ci>zeta_trv</ci>
                <apply>
                    <max/>
                    <ci>zeta_trv_pre</ci>
                    <cn cellml:units="dimensionless">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>zeta_puv</ci>
                <apply>
                    <max/>
                    <ci>zeta_puv_pre</ci>
                    <cn cellml:units="dimensionless">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>zeta_miv</ci>
                <apply>
                    <max/>
                    <ci>zeta_miv_pre</ci>
                    <cn cellml:units="dimensionless">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>zeta_aov</ci>
                <apply>
                    <max/>
                    <ci>zeta_aov_pre</ci>
                    <cn cellml:units="dimensionless">0</cn>
                </apply>
            </apply>
            <!-- calculate the flow through the valves-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v_trv</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <ci>B_trv</ci>
                                </apply>
                                <ci>v_trv</ci>
                                <apply>
                                    <abs/>
                                    <ci>v_trv</ci>
                                </apply>
                            </apply>
                            <ci>u_ra</ci>
                        </apply>
                        <ci>u_rv</ci>
                    </apply>
                    <ci>L_trv</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v_puv</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <ci>B_puv</ci>
                                </apply>
                                <ci>v_puv</ci>
                                <apply>
                                    <abs/>
                                    <ci>v_puv</ci>
                                </apply>
                            </apply>
                            <ci>u_rv</ci>
                        </apply>
                        <ci>u_par</ci>
                    </apply>
                    <ci>L_puv</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v_miv</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <ci>B_miv</ci>
                                </apply>
                                <ci>v_miv</ci>
                                <apply>
                                    <abs/>
                                    <ci>v_miv</ci>
                                </apply>
                            </apply>
                            <ci>u_la</ci>
                        </apply>
                        <ci>u_lv</ci>
                    </apply>
                    <ci>L_miv</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>v_aov</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <plus/>
                            <apply>
                                <times/>
                                <apply>
                                    <minus/>
                                    <ci>B_aov</ci>
                                </apply>
                                <ci>v_aov</ci>
                                <apply>
                                    <abs/>
                                    <ci>v_aov</ci>
                                </apply>
                            </apply>
                            <ci>u_lv</ci>
                        </apply>
                        <ci>u_root</ci>
                    </apply>
                    <ci>L_aov</ci>
                </apply>
            </apply>
        </math>
        <!-- Control from sympathetic-->
        <variable name="E_rv_A_wCont" public_interface="out" units="J_per_m6"/>
        <variable name="E_lv_A_wCont" public_interface="out" units="J_per_m6"/>
        <variable name="Delta_E_rv" public_interface="in" units="J_per_m6"/>
        <variable name="Delta_E_lv" public_interface="in" units="J_per_m6"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>E_rv_A_wCont</ci>
                <apply>
                    <plus/>
                    <ci>E_rv_A</ci>
                    <ci>Delta_E_rv</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>E_lv_A_wCont</ci>
                <apply>
                    <plus/>
                    <ci>E_lv_A</ci>
                    <ci>Delta_E_lv</ci>
                </apply>
            </apply>
            <!-- Constitutive Relations-->
            <apply>
                <eq/>
                <ci>u_ra</ci>
                <apply>
                    <times/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>e_a</ci>
                            <ci>E_ra_A</ci>
                        </apply>
                        <ci>E_ra_B</ci>
                    </apply>
                    <apply>
                        <minus/>
                        <ci>q_ra</ci>
                        <ci>q_ra_us</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_rv</ci>
                <apply>
                    <times/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>e_v</ci>
                            <ci>E_rv_A_wCont</ci>
                        </apply>
                        <ci>E_rv_B</ci>
                    </apply>
                    <apply>
                        <minus/>
                        <ci>q_rv</ci>
                        <ci>q_rv_us</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_la</ci>
                <apply>
                    <times/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>e_a</ci>
                            <ci>E_la_A</ci>
                        </apply>
                        <ci>E_la_B</ci>
                    </apply>
                    <apply>
                        <minus/>
                        <ci>q_la</ci>
                        <ci>q_la_us</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>u_lv</ci>
                <apply>
                    <times/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>e_v</ci>
                            <ci>E_lv_A_wCont</ci>
                        </apply>
                        <ci>E_lv_B</ci>
                    </apply>
                    <apply>
                        <minus/>
                        <ci>q_lv</ci>
                        <ci>q_lv_us</ci>
                    </apply>
                </apply>
            </apply>
            <!-- Conservation Laws-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_ra</ci>
                </apply>
                <apply>
                    <minus/>
                    <apply>
                        <plus/>
                        <ci>v_svc</ci>
                        <ci>v_ivc</ci>
                    </apply>
                    <ci>v_trv</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_rv</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_trv</ci>
                    <ci>v_puv</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_la</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_pvn</ci>
                    <ci>v_miv</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_lv</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_miv</ci>
                    <ci>v_aov</ci>
                </apply>
            </apply>
        </math>
    </component>
    <component name="simple_lung_bond_graph_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- ______  Pressures _________
 atmospheric/mouth pressure-->
        <variable name="P_m" public_interface="in" units="J_per_m3"/>
        <!-- larynx pressure-->
        <variable name="P_l" public_interface="out" units="J_per_m3"/>
        <!-- trachea pressure-->
        <variable name="P_t" public_interface="out" units="J_per_m3"/>
        <!-- bronchea pressure-->
        <variable name="P_b" public_interface="out" units="J_per_m3"/>
        <!-- Alveolar pressure-->
        <variable name="P_A" public_interface="out" units="J_per_m3"/>
        <!-- Pleural pressure-->
        <variable name="P_pl" public_interface="out" units="J_per_m3"/>
        <!-- resp muscle pressure-->
        <variable name="P_mus" public_interface="out" units="J_per_m3"/>
        <variable name="P_mus_min" public_interface="in" units="J_per_m3"/>
        <variable name="P_mus_min_wCont" public_interface="out" units="J_per_m3"/>
        <variable name="P_plEE" public_interface="in" units="J_per_m3"/>
        <variable name="Delta_P_mus" public_interface="in" units="J_per_m3"/>
        <!-- ______  volumes_________
 larynx volume-->
        <variable initial_value="1.0e-2" name="q_l" public_interface="out" units="m3"/>
        <variable initial_value="1.0e-3" name="q_t" public_interface="out" units="m3"/>
        <variable initial_value="1.0e-3" name="q_b" public_interface="out" units="m3"/>
        <variable initial_value="0.0" name="q_A_stressed" public_interface="out" units="m3"/>
        <variable name="q_A" public_interface="out" units="m3"/>
        <variable initial_value="0.0" name="q_pl" public_interface="out" units="m3"/>
        <variable name="q_D" public_interface="out" units="m3"/>
        <!-- ______  flows _________-->
        <variable name="v_ml" public_interface="out" units="m3_per_s"/>
        <variable name="v_lt" public_interface="out" units="m3_per_s"/>
        <variable name="v_tb" public_interface="out" units="m3_per_s"/>
        <variable name="v_bA" public_interface="out" units="m3_per_s"/>
        <variable name="v_twall" public_interface="out" units="m3_per_s"/>
        <variable name="v_bwall" public_interface="out" units="m3_per_s"/>
        <variable name="v_plwall" public_interface="out" units="m3_per_s"/>
        <!-- ______  Resistances_________-->
        <variable name="R_ml" public_interface="in" units="Js_per_m6"/>
        <variable name="R_lt" public_interface="in" units="Js_per_m6"/>
        <variable name="R_tb" public_interface="in" units="Js_per_m6"/>
        <variable name="R_bA" public_interface="in" units="Js_per_m6"/>
        <variable name="R_plwall" public_interface="in" units="Js_per_m6"/>
        <!-- ______  Compliances_________-->
        <variable name="C_l" public_interface="in" units="m6_per_J"/>
        <variable name="C_t" public_interface="in" units="m6_per_J"/>
        <variable name="C_b" public_interface="in" units="m6_per_J"/>
        <variable name="C_A" public_interface="in" units="m6_per_J"/>
        <variable name="C_pl" public_interface="in" units="m6_per_J"/>
        <!-- periods/times-->
        <variable name="t_floor" public_interface="out" units="second"/>
        <variable name="T_resp" public_interface="in" units="second"/>
        <variable name="Delta_RR_resp" public_interface="in" units="second"/>
        <variable name="T_resp_wCont" public_interface="out" units="second"/>
        <variable name="T_resp_min" public_interface="in" units="second"/>
        <variable name="T_I" public_interface="out" units="second"/>
        <variable name="T_E" public_interface="out" units="second"/>
        <variable name="tau" public_interface="out" units="second"/>
        <variable name="IE_ratio" public_interface="in" units="dimensionless"/>
        <!-- unstressed volumes-->
        <variable name="q_l_us" public_interface="in" units="m3"/>
        <variable name="q_t_us" public_interface="in" units="m3"/>
        <variable name="q_b_us" public_interface="in" units="m3"/>
        <variable name="q_A_us" public_interface="in" units="m3"/>
        <!-- TODO check this doesn't cause issues. -->
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>T_resp_wCont</ci>
                <apply>
                    <divide/>
                    <cn cellml:units="dimensionless">1</cn>
                    <apply>
                        <plus/>
                        <apply>
                            <divide/>
                            <cn cellml:units="dimensionless">1</cn>
                            <ci>T_resp</ci>
                        </apply>
                        <ci>Delta_RR_resp</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>T_E</ci>
                <apply>
                    <divide/>
                    <ci>T_resp_wCont</ci>
                    <apply>
                        <plus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <ci>IE_ratio</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>T_I</ci>
                <apply>
                    <times/>
                    <ci>T_E</ci>
                    <ci>IE_ratio</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>tau</ci>
                <apply>
                    <divide/>
                    <ci>T_E</ci>
                    <cn cellml:units="dimensionless">5</cn>
                </apply>
            </apply>
            <!-- TODO split this into submodules-->
            <apply>
                <eq/>
                <ci>v_ml</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>P_m</ci>
                        <ci>P_l</ci>
                    </apply>
                    <ci>R_ml</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_l</ci>
                </apply>
                <apply>
                    <minus/>
                    <ci>v_ml</ci>
                    <ci>v_lt</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>P_l</ci>
                <apply>
                    <divide/>
                    <ci>q_l</ci>
                    <ci>C_l</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_lt</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>P_l</ci>
                        <ci>P_t</ci>
                    </apply>
                    <ci>R_lt</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_twall</ci>
                <apply>
                    <minus/>
                    <ci>v_lt</ci>
                    <ci>v_tb</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_t</ci>
                </apply>
                <ci>v_twall</ci>
            </apply>
            <apply>
                <eq/>
                <ci>P_t</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_t</ci>
                        <ci>C_t</ci>
                    </apply>
                    <ci>P_pl</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_tb</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>P_t</ci>
                        <ci>P_b</ci>
                    </apply>
                    <ci>R_tb</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_bwall</ci>
                <apply>
                    <minus/>
                    <ci>v_tb</ci>
                    <ci>v_bA</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_b</ci>
                </apply>
                <ci>v_bwall</ci>
            </apply>
            <apply>
                <eq/>
                <ci>P_b</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_b</ci>
                        <ci>C_b</ci>
                    </apply>
                    <ci>P_pl</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_bA</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>P_b</ci>
                        <ci>P_A</ci>
                    </apply>
                    <ci>R_bA</ci>
                </apply>
            </apply>
            <!-- v_Awall = v_bA-->
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_A_stressed</ci>
                </apply>
                <ci>v_bA</ci>
            </apply>
            <apply>
                <eq/>
                <ci>P_A</ci>
                <apply>
                    <plus/>
                    <apply>
                        <divide/>
                        <ci>q_A_stressed</ci>
                        <ci>C_A</ci>
                    </apply>
                    <ci>P_pl</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>q_pl</ci>
                </apply>
                <apply>
                    <minus/>
                    <apply>
                        <minus/>
                        <apply>
                            <minus/>
                            <ci>v_plwall</ci>
                            <ci>v_twall</ci>
                        </apply>
                        <ci>v_bwall</ci>
                    </apply>
                    <ci>v_bA</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>P_pl</ci>
                <apply>
                    <minus/>
                    <apply>
                        <divide/>
                        <ci>q_pl</ci>
                        <ci>C_pl</ci>
                    </apply>
                    <ci>P_plEE</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_plwall</ci>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <ci>P_mus</ci>
                        <ci>P_pl</ci>
                    </apply>
                    <ci>R_plwall</ci>
                </apply>
            </apply>
            <!-- Dead space volume-->
            <apply>
                <eq/>
                <ci>q_D</ci>
                <apply>
                    <plus/>
                    <ci>q_l</ci>
                    <ci>q_t</ci>
                    <ci>q_b</ci>
                    <ci>q_l_us</ci>
                    <ci>q_t_us</ci>
                    <ci>q_b_us</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>q_A</ci>
                <apply>
                    <plus/>
                    <ci>q_A_stressed</ci>
                    <ci>q_A_us</ci>
                </apply>
            </apply>
            <!-- TODO + unstressed volume-->
            <!-- calculate time through this period-->
            <apply>
                <eq/>
                <ci>t_floor</ci>
                <apply>
                    <minus/>
                    <ci>t</ci>
                    <apply>
                        <times/>
                        <apply>
                            <floor/>
                            <apply>
                                <divide/>
                                <ci>t</ci>
                                <ci>T_resp_wCont</ci>
                            </apply>
                        </apply>
                        <ci>T_resp_wCont</ci>
                    </apply>
                </apply>
            </apply>
            <!-- TODO swap this muscle model for the one used in ben tal and smith 2008-->
            <apply>
                <eq/>
                <ci>P_mus_min_wCont</ci>
                <apply>
                    <plus/>
                    <ci>P_mus_min</ci>
                    <ci>Delta_P_mus</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>P_mus</ci>
                <piecewise>
                    <piece>
                        <apply>
                            <plus/>
                            <apply>
                                <times/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <minus/>
                                        <ci>P_mus_min_wCont</ci>
                                    </apply>
                                    <apply>
                                        <times/>
                                        <ci>T_I</ci>
                                        <ci>T_E</ci>
                                    </apply>
                                </apply>
                                <apply>
                                    <power/>
                                    <ci>t_floor</ci>
                                    <cn cellml:units="dimensionless">2</cn>
                                </apply>
                            </apply>
                            <apply>
                                <times/>
                                <apply>
                                    <divide/>
                                    <apply>
                                        <times/>
                                        <ci>P_mus_min_wCont</ci>
                                        <ci>T_resp_wCont</ci>
                                    </apply>
                                    <apply>
                                        <times/>
                                        <ci>T_I</ci>
                                        <ci>T_E</ci>
                                    </apply>
                                </apply>
                                <ci>t_floor</ci>
                            </apply>
                        </apply>
                        <apply>
                            <lt/>
                            <ci>t_floor</ci>
                            <ci>T_I</ci>
                        </apply>
                    </piece>
                    <otherwise>
                        <apply>
                            <times/>
                            <apply>
                                <divide/>
                                <ci>P_mus_min_wCont</ci>
                                <apply>
                                    <minus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <exp/>
                                        <apply>
                                            <divide/>
                                            <apply>
                                                <minus/>
                                                <ci>T_E</ci>
                                            </apply>
                                            <ci>tau</ci>
                                        </apply>
                                    </apply>
                                </apply>
                            </apply>
                            <apply>
                                <minus/>
                                <apply>
                                    <exp/>
                                    <apply>
                                        <divide/>
                                        <apply>
                                            <minus/>
                                            <apply>
                                                <minus/>
                                                <ci>t_floor</ci>
                                                <ci>T_I</ci>
                                            </apply>
                                        </apply>
                                        <ci>tau</ci>
                                    </apply>
                                </apply>
                                <apply>
                                    <exp/>
                                    <apply>
                                        <divide/>
                                        <apply>
                                            <minus/>
                                            <ci>T_E</ci>
                                        </apply>
                                        <ci>tau</ci>
                                    </apply>
                                </apply>
                            </apply>
                        </apply>
                    </otherwise>
                </piecewise>
            </apply>
        </math>
    </component>
    <component name="tissue_GE_simple_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="q_0" public_interface="in" units="m3"/>
        <variable name="v" public_interface="in" units="m3_per_s"/>
        <variable name="M_O2" public_interface="in" units="m3_per_s"/>
        <variable name="M_CO2" public_interface="in" units="m3_per_s"/>
        <variable name="C_O2_a" public_interface="in" units="dimensionless"/>
        <variable name="C_CO2_a" public_interface="in" units="dimensionless"/>
        <variable initial_value="0.15" name="C_O2_p" public_interface="out" units="dimensionless"/>
        <variable initial_value="0.38" name="C_CO2_p" public_interface="out" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>C_O2_p</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>v</ci>
                            <apply>
                                <minus/>
                                <ci>C_O2_a</ci>
                                <ci>C_O2_p</ci>
                            </apply>
                        </apply>
                        <ci>M_O2</ci>
                    </apply>
                    <ci>q_0</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>C_CO2_p</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>v</ci>
                            <apply>
                                <minus/>
                                <ci>C_CO2_a</ci>
                                <ci>C_CO2_p</ci>
                            </apply>
                        </apply>
                        <ci>M_CO2</ci>
                    </apply>
                    <ci>q_0</ci>
                </apply>
            </apply>
        </math>
    </component>
    <!--//////////////////////////////////////////////////////////////////////////////////////////////////////
/////////////module for O2 and CO2 calculation in a pulmonary system///
//////////////////////////////////////////////////////////////////////////////////////////////////////-->
    <component name="pulmonary_GE_type">
        <variable name="t" public_interface="in" units="second"/>
        <!-- Constitutive parameters-->
        <variable name="q_0" public_interface="in" units="m3"/>
        <variable name="v" public_interface="in" units="m3_per_s"/>
        <variable name="M_O2" public_interface="out" units="m3_per_s"/>
        <variable name="M_CO2" public_interface="out" units="m3_per_s"/>
        <variable name="C_O2_v" public_interface="in" units="dimensionless"/>
        <variable name="C_CO2_v" public_interface="in" units="dimensionless"/>
        <variable initial_value="0.202" name="C_O2_p" public_interface="out" units="dimensionless"/>
        <variable name="d_C_O2_p_dt" public_interface="out" units="Hz"/>
        <variable initial_value="0.35" name="C_CO2_p" public_interface="out" units="dimensionless"/>
        <!-- New params-->
        <variable name="k_O2" public_interface="in" units="m6_per_Js"/>
        <variable name="k_CO2" public_interface="in" units="m6_per_Js"/>
        <variable name="P_O2_A" public_interface="in" units="J_per_m3"/>
        <variable name="P_CO2_A" public_interface="in" units="J_per_m3"/>
        <variable name="shunt_fraction" public_interface="in" units="dimensionless"/>
        <!--New vars-->
        <variable name="P_O2_p" public_interface="out" units="J_per_m3"/>
        <variable name="P_CO2_p" public_interface="out" units="J_per_m3"/>
        <variable name="C_O2_a" public_interface="out" units="dimensionless"/>
        <variable name="C_CO2_a" public_interface="out" units="dimensionless"/>
        <variable name="v_p" public_interface="out" units="m3_per_s"/>
        <variable name="v_sh" public_interface="out" units="m3_per_s"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>M_O2</ci>
                <apply>
                    <times/>
                    <ci>k_O2</ci>
                    <apply>
                        <minus/>
                        <ci>P_O2_A</ci>
                        <ci>P_O2_p</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>M_CO2</ci>
                <apply>
                    <times/>
                    <ci>k_CO2</ci>
                    <apply>
                        <minus/>
                        <ci>P_CO2_A</ci>
                        <ci>P_CO2_p</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>C_O2_p</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>v_p</ci>
                            <apply>
                                <minus/>
                                <ci>C_O2_v</ci>
                                <ci>C_O2_p</ci>
                            </apply>
                        </apply>
                        <ci>M_O2</ci>
                    </apply>
                    <ci>q_0</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>d_C_O2_p_dt</ci>
                <apply>
                    <divide/>
                    <apply>
                        <plus/>
                        <apply>
                            <times/>
                            <ci>v_p</ci>
                            <apply>
                                <minus/>
                                <ci>C_CO2_v</ci>
                                <ci>C_CO2_p</ci>
                            </apply>
                        </apply>
                        <ci>M_CO2</ci>
                    </apply>
                    <ci>q_0</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>C_CO2_p</ci>
                </apply>
                <ci>d_C_O2_p_dt</ci>
            </apply>
            <!-- from inverted dissociation-->
            <apply>
                <eq/>
                <ci>P_O2_p</ci>
                <apply>
                    <plus/>
                    <ci>r_1</ci>
                    <apply>
                        <root/>
                        <apply>
                            <minus/>
                            <apply>
                                <power/>
                                <ci>r_1</ci>
                                <cn cellml:units="dimensionless">2</cn>
                            </apply>
                            <ci>s_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>P_CO2_p</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>d_2</ci>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <times/>
                                <ci>alpha_2</ci>
                                <ci>P_O2_p</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <times/>
                            <ci>beta_2</ci>
                            <ci>P_O2_p</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <!-- flows from shunt todo model this??-->
            <apply>
                <eq/>
                <ci>v_p</ci>
                <apply>
                    <times/>
                    <ci>v</ci>
                    <apply>
                        <minus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <ci>shunt_fraction</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>v_sh</ci>
                <apply>
                    <times/>
                    <ci>v</ci>
                    <ci>shunt_fraction</ci>
                </apply>
            </apply>
            <!-- calculate arterial gas concentration due to pulmonary shunt-->
            <apply>
                <eq/>
                <ci>C_O2_a</ci>
                <apply>
                    <max/>
                    <apply>
                        <divide/>
                        <apply>
                            <plus/>
                            <apply>
                                <times/>
                                <ci>v_p</ci>
                                <ci>C_O2_p</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>v_sh</ci>
                                <ci>C_O2_v</ci>
                            </apply>
                        </apply>
                        <ci>v</ci>
                    </apply>
                    <cn cellml:units="m3_per_s">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>C_CO2_a</ci>
                <apply>
                    <max/>
                    <apply>
                        <divide/>
                        <apply>
                            <plus/>
                            <apply>
                                <times/>
                                <ci>v_p</ci>
                                <ci>C_CO2_p</ci>
                            </apply>
                            <apply>
                                <times/>
                                <ci>v_sh</ci>
                                <ci>C_CO2_v</ci>
                            </apply>
                        </apply>
                        <ci>v</ci>
                    </apply>
                    <cn cellml:units="m3_per_s">0</cn>
                </apply>
            </apply>
        </math>
        <!--____________ inverted dissociation curve below here___________-->
        <variable name="k_1" public_interface="in" units="J_per_m3"/>
        <variable name="k_2" public_interface="in" units="J_per_m3"/>
        <variable name="h_1" public_interface="in" units="dimensionless"/>
        <variable name="h_2" public_interface="in" units="dimensionless"/>
        <variable name="d_1" public_interface="out" units="J_per_m3"/>
        <variable name="d_2" public_interface="out" units="J_per_m3"/>
        <variable name="r_1" public_interface="out" units="J_per_m3"/>
        <variable name="r_2" public_interface="out" units="J_per_m3"/>
        <variable name="s_1" public_interface="out" units="J2_per_m6"/>
        <variable name="s_2" public_interface="out" units="J2_per_m6"/>
        <variable name="alpha_1" public_interface="in" units="m3_per_J"/>
        <variable name="alpha_2" public_interface="in" units="m3_per_J"/>
        <variable name="beta_1" public_interface="in" units="m3_per_J"/>
        <variable name="beta_2" public_interface="in" units="m3_per_J"/>
        <variable name="C_O2_sat" public_interface="in" units="dimensionless"/>
        <variable name="C_CO2_sat" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>d_1</ci>
                <apply>
                    <max/>
                    <apply>
                        <times/>
                        <ci>k_1</ci>
                        <apply>
                            <power/>
                            <apply>
                                <divide/>
                                <ci>C_O2_p</ci>
                                <apply>
                                    <minus/>
                                    <ci>C_O2_sat</ci>
                                    <ci>C_O2_p</ci>
                                </apply>
                            </apply>
                            <ci>h_1</ci>
                        </apply>
                    </apply>
                    <cn cellml:units="J_per_m3">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>d_2</ci>
                <apply>
                    <max/>
                    <apply>
                        <times/>
                        <ci>k_2</ci>
                        <apply>
                            <power/>
                            <apply>
                                <divide/>
                                <ci>C_CO2_p</ci>
                                <apply>
                                    <minus/>
                                    <ci>C_CO2_sat</ci>
                                    <ci>C_CO2_p</ci>
                                </apply>
                            </apply>
                            <ci>h_2</ci>
                        </apply>
                    </apply>
                    <cn cellml:units="J_per_m3">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>r_1</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">0.5</cn>
                        </apply>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <apply>
                                    <plus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <times/>
                                        <ci>beta_1</ci>
                                        <ci>d_2</ci>
                                    </apply>
                                </apply>
                                <apply>
                                    <times/>
                                    <ci>beta_2</ci>
                                    <ci>d_1</ci>
                                </apply>
                            </apply>
                            <apply>
                                <times/>
                                <ci>alpha_1</ci>
                                <ci>alpha_2</ci>
                                <ci>d_1</ci>
                                <ci>d_2</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_2</ci>
                        <apply>
                            <times/>
                            <ci>alpha_2</ci>
                            <ci>beta_1</ci>
                            <ci>d_2</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>r_2</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">0.5</cn>
                        </apply>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <apply>
                                    <plus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <times/>
                                        <ci>beta_2</ci>
                                        <ci>d_1</ci>
                                    </apply>
                                </apply>
                                <apply>
                                    <times/>
                                    <ci>beta_1</ci>
                                    <ci>d_2</ci>
                                </apply>
                            </apply>
                            <apply>
                                <times/>
                                <ci>alpha_2</ci>
                                <ci>alpha_1</ci>
                                <ci>d_2</ci>
                                <ci>d_1</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_1</ci>
                        <apply>
                            <times/>
                            <ci>alpha_1</ci>
                            <ci>beta_2</ci>
                            <ci>d_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>s_1</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                        <apply>
                            <plus/>
                            <ci>d_1</ci>
                            <apply>
                                <times/>
                                <ci>alpha_1</ci>
                                <ci>d_1</ci>
                                <ci>d_2</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_2</ci>
                        <apply>
                            <times/>
                            <ci>alpha_2</ci>
                            <ci>beta_1</ci>
                            <ci>d_2</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>s_2</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                        <apply>
                            <plus/>
                            <ci>d_2</ci>
                            <apply>
                                <times/>
                                <ci>alpha_2</ci>
                                <ci>d_2</ci>
                                <ci>d_1</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_1</ci>
                        <apply>
                            <times/>
                            <ci>alpha_1</ci>
                            <ci>beta_2</ci>
                            <ci>d_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="gas_transport_simple_type">
        <variable name="t" public_interface="in" units="second"/>
        <variable name="C_O2_in" public_interface="in" units="dimensionless"/>
        <variable name="C_CO2_in" public_interface="in" units="dimensionless"/>
        <variable initial_value="0.18" name="C_O2_out" public_interface="out" units="dimensionless"/>
        <variable initial_value="0.35" name="C_CO2_out" public_interface="out" units="dimensionless"/>
        <variable name="dot_C_CO2_out" public_interface="out" units="per_s"/>
        <variable name="q_0" public_interface="in" units="m3"/>
        <variable name="v" public_interface="in" units="m3_per_s"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>C_O2_out</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>v</ci>
                        <apply>
                            <minus/>
                            <ci>C_O2_in</ci>
                            <ci>C_O2_out</ci>
                        </apply>
                    </apply>
                    <ci>q_0</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>dot_C_CO2_out</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>v</ci>
                        <apply>
                            <minus/>
                            <ci>C_CO2_in</ci>
                            <ci>C_CO2_out</ci>
                        </apply>
                    </apply>
                    <ci>q_0</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>C_CO2_out</ci>
                </apply>
                <ci>dot_C_CO2_out</ci>
            </apply>
        </math>
        <!-- from inverted dissociation-->
        <variable name="P_O2_out" public_interface="out" units="J_per_m3"/>
        <variable name="P_CO2_out" public_interface="out" units="J_per_m3"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>P_O2_out</ci>
                <apply>
                    <plus/>
                    <ci>r_1</ci>
                    <apply>
                        <root/>
                        <apply>
                            <minus/>
                            <apply>
                                <power/>
                                <ci>r_1</ci>
                                <cn cellml:units="dimensionless">2</cn>
                            </apply>
                            <ci>s_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>P_CO2_out</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <ci>d_2</ci>
                        <apply>
                            <plus/>
                            <cn cellml:units="dimensionless">1</cn>
                            <apply>
                                <times/>
                                <ci>alpha_2</ci>
                                <ci>P_O2_out</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <cn cellml:units="dimensionless">1</cn>
                        <apply>
                            <times/>
                            <ci>beta_2</ci>
                            <ci>P_O2_out</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
        <variable name="k_1" public_interface="in" units="J_per_m3"/>
        <variable name="k_2" public_interface="in" units="J_per_m3"/>
        <variable name="h_1" public_interface="in" units="dimensionless"/>
        <variable name="h_2" public_interface="in" units="dimensionless"/>
        <variable name="d_1" public_interface="out" units="J_per_m3"/>
        <variable name="d_2" public_interface="out" units="J_per_m3"/>
        <variable name="r_1" public_interface="out" units="J_per_m3"/>
        <variable name="r_2" public_interface="out" units="J_per_m3"/>
        <variable name="s_1" public_interface="out" units="J2_per_m6"/>
        <variable name="s_2" public_interface="out" units="J2_per_m6"/>
        <variable name="alpha_1" public_interface="in" units="m3_per_J"/>
        <variable name="alpha_2" public_interface="in" units="m3_per_J"/>
        <variable name="beta_1" public_interface="in" units="m3_per_J"/>
        <variable name="beta_2" public_interface="in" units="m3_per_J"/>
        <variable name="C_O2_sat" public_interface="in" units="dimensionless"/>
        <variable name="C_CO2_sat" public_interface="in" units="dimensionless"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <ci>d_1</ci>
                <apply>
                    <max/>
                    <apply>
                        <times/>
                        <ci>k_1</ci>
                        <apply>
                            <power/>
                            <apply>
                                <divide/>
                                <ci>C_O2_out</ci>
                                <apply>
                                    <minus/>
                                    <ci>C_O2_sat</ci>
                                    <ci>C_O2_out</ci>
                                </apply>
                            </apply>
                            <ci>h_1</ci>
                        </apply>
                    </apply>
                    <cn cellml:units="J_per_m3">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>d_2</ci>
                <apply>
                    <max/>
                    <apply>
                        <times/>
                        <ci>k_2</ci>
                        <apply>
                            <power/>
                            <apply>
                                <divide/>
                                <ci>C_CO2_out</ci>
                                <apply>
                                    <minus/>
                                    <ci>C_CO2_sat</ci>
                                    <ci>C_CO2_out</ci>
                                </apply>
                            </apply>
                            <ci>h_2</ci>
                        </apply>
                    </apply>
                    <cn cellml:units="J_per_m3">0</cn>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>r_1</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">0.5</cn>
                        </apply>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <apply>
                                    <plus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <times/>
                                        <ci>beta_1</ci>
                                        <ci>d_2</ci>
                                    </apply>
                                </apply>
                                <apply>
                                    <times/>
                                    <ci>beta_2</ci>
                                    <ci>d_1</ci>
                                </apply>
                            </apply>
                            <apply>
                                <times/>
                                <ci>alpha_1</ci>
                                <ci>alpha_2</ci>
                                <ci>d_1</ci>
                                <ci>d_2</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_2</ci>
                        <apply>
                            <times/>
                            <ci>alpha_2</ci>
                            <ci>beta_1</ci>
                            <ci>d_2</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>r_2</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">0.5</cn>
                        </apply>
                        <apply>
                            <minus/>
                            <apply>
                                <minus/>
                                <apply>
                                    <plus/>
                                    <cn cellml:units="dimensionless">1</cn>
                                    <apply>
                                        <times/>
                                        <ci>beta_2</ci>
                                        <ci>d_1</ci>
                                    </apply>
                                </apply>
                                <apply>
                                    <times/>
                                    <ci>beta_1</ci>
                                    <ci>d_2</ci>
                                </apply>
                            </apply>
                            <apply>
                                <times/>
                                <ci>alpha_2</ci>
                                <ci>alpha_1</ci>
                                <ci>d_2</ci>
                                <ci>d_1</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_1</ci>
                        <apply>
                            <times/>
                            <ci>alpha_1</ci>
                            <ci>beta_2</ci>
                            <ci>d_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>s_1</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                        <apply>
                            <plus/>
                            <ci>d_1</ci>
                            <apply>
                                <times/>
                                <ci>alpha_1</ci>
                                <ci>d_1</ci>
                                <ci>d_2</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_2</ci>
                        <apply>
                            <times/>
                            <ci>alpha_2</ci>
                            <ci>beta_1</ci>
                            <ci>d_2</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>s_2</ci>
                <apply>
                    <divide/>
                    <apply>
                        <times/>
                        <apply>
                            <minus/>
                            <cn cellml:units="dimensionless">1</cn>
                        </apply>
                        <apply>
                            <plus/>
                            <ci>d_2</ci>
                            <apply>
                                <times/>
                                <ci>alpha_2</ci>
                                <ci>d_2</ci>
                                <ci>d_1</ci>
                            </apply>
                        </apply>
                    </apply>
                    <apply>
                        <plus/>
                        <ci>beta_1</ci>
                        <apply>
                            <times/>
                            <ci>alpha_1</ci>
                            <ci>beta_2</ci>
                            <ci>d_1</ci>
                        </apply>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
    <component name="respiratory_gas_transport_type">
        <variable name="t" public_interface="in" units="second"/>
        <!--constants-->
        <variable name="F_O2_i" public_interface="in" units="dimensionless"/>
        <variable name="F_CO2_i" public_interface="in" units="dimensionless"/>
        <variable name="P_atm" public_interface="in" units="J_per_m3"/>
        <variable name="P_ws" public_interface="in" units="J_per_m3"/>
        <!-- This K causes a loss in mass? fix when turning into bond-graph-->
        <variable name="K_LOSSES" public_interface="in" units="dimensionless"/>
        <!-- volume fractions-->
        <variable initial_value="0.21" name="F_O2_D" public_interface="out" units="dimensionless"/>
        <variable initial_value="0.1" name="F_CO2_D" public_interface="out" units="dimensionless"/>
        <variable initial_value="0.21" name="F_O2_A" public_interface="out" units="dimensionless"/>
        <variable initial_value="0.1" name="F_CO2_A" public_interface="out" units="dimensionless"/>
        <!-- partial pressures, outputs to the pulmonary gas exchange model-->
        <variable name="P_O2_A" public_interface="out" units="J_per_m3"/>
        <variable name="P_CO2_A" public_interface="out" units="J_per_m3"/>
        <!-- inputs from lung model-->
        <variable name="v_ml" public_interface="in" units="m3_per_s"/>
        <variable name="v_bA" public_interface="in" units="m3_per_s"/>
        <variable name="q_D" public_interface="in" units="m3"/>
        <variable name="q_A" public_interface="in" units="m3"/>
        <!--inputs from pulmonary gas exchange model-->
        <variable name="M_O2" public_interface="in" units="m3_per_s"/>
        <variable name="M_CO2" public_interface="in" units="m3_per_s"/>
        <math xmlns="http://www.w3.org/1998/Math/MathML">
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>F_O2_D</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <times/>
                            <apply>
                                <max/>
                                <ci>v_ml</ci>
                                <cn cellml:units="m3_per_s">0</cn>
                            </apply>
                            <apply>
                                <minus/>
                                <ci>F_O2_i</ci>
                                <ci>F_O2_D</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <apply>
                                <max/>
                                <apply>
                                    <minus/>
                                    <ci>v_bA</ci>
                                </apply>
                                <cn cellml:units="m3_per_s">0</cn>
                            </apply>
                            <apply>
                                <minus/>
                                <ci>F_O2_D</ci>
                                <ci>F_O2_A</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>q_D</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>F_CO2_D</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <times/>
                            <apply>
                                <max/>
                                <ci>v_ml</ci>
                                <cn cellml:units="m3_per_s">0</cn>
                            </apply>
                            <apply>
                                <minus/>
                                <ci>F_CO2_i</ci>
                                <ci>F_CO2_D</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <apply>
                                <max/>
                                <apply>
                                    <minus/>
                                    <ci>v_bA</ci>
                                </apply>
                                <cn cellml:units="m3_per_s">0</cn>
                            </apply>
                            <apply>
                                <minus/>
                                <ci>F_CO2_D</ci>
                                <ci>F_CO2_A</ci>
                            </apply>
                        </apply>
                    </apply>
                    <ci>q_D</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>F_O2_A</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <times/>
                            <apply>
                                <max/>
                                <ci>v_bA</ci>
                                <cn cellml:units="m3_per_s">0</cn>
                            </apply>
                            <apply>
                                <minus/>
                                <ci>F_O2_D</ci>
                                <ci>F_O2_A</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>K_LOSSES</ci>
                            <ci>M_O2</ci>
                        </apply>
                    </apply>
                    <ci>q_A</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <apply>
                    <diff/>
                    <bvar>
                        <ci>t</ci>
                    </bvar>
                    <ci>F_CO2_A</ci>
                </apply>
                <apply>
                    <divide/>
                    <apply>
                        <minus/>
                        <apply>
                            <times/>
                            <apply>
                                <max/>
                                <ci>v_bA</ci>
                                <cn cellml:units="m3_per_s">0</cn>
                            </apply>
                            <apply>
                                <minus/>
                                <ci>F_CO2_D</ci>
                                <ci>F_CO2_A</ci>
                            </apply>
                        </apply>
                        <apply>
                            <times/>
                            <ci>K_LOSSES</ci>
                            <ci>M_CO2</ci>
                        </apply>
                    </apply>
                    <ci>q_A</ci>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>P_O2_A</ci>
                <apply>
                    <times/>
                    <ci>F_O2_A</ci>
                    <apply>
                        <minus/>
                        <ci>P_atm</ci>
                        <ci>P_ws</ci>
                    </apply>
                </apply>
            </apply>
            <apply>
                <eq/>
                <ci>P_CO2_A</ci>
                <apply>
                    <times/>
                    <ci>F_CO2_A</ci>
                    <apply>
                        <minus/>
                        <ci>P_atm</ci>
                        <ci>P_ws</ci>
                    </apply>
                </apply>
            </apply>
        </math>
    </component>
</model>
